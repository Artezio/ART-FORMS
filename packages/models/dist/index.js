!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@surveybuilder/observable")):"function"==typeof define&&define.amd?define(["@surveybuilder/observable"],t):"object"==typeof exports?exports.Models=t(require("@surveybuilder/observable")):e.Models=t(e["@surveybuilder/observable"])}(this,(function(e){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=36)}([function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP="GROUP",t.DISPLAY="DISPLAY",t.BOOLEAN="BOOLEAN",t.DECIMAL="DECIMAL",t.DATE="DATE",t.DATE_TIME="DATE_TIME",t.TIME="TIME",t.TEXT="TEXT",t.CHOICE="CHOICE",t.OPEN_CHOICE="OPEN_CHOICE",t.MULTI_CHOICE="MULTI_CHOICE",t.ATTACHMENT="ATTACHMENT",t.STRING="STRING"},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),a=s(i(4)),u=s(i(16));class l extends a.default{constructor(e,t){super(e,t),this.initialAnswerIdMap=new Map,this.initialAnswersFactory=new u.default(this),this.completeInitialAnswers(e),this.initialAnswers.forEach(e=>this.initialAnswerIdMap.set(e.id,!0))}completeInitialAnswers(e){e&&e.initialAnswers?this.initialAnswers=e.initialAnswers.map(e=>this.initialAnswersFactory.createInitialAnswer(e)):this.initialAnswers=[]}setSingleInitialAnswer(e){this.initialAnswers=[e],this.initialAnswerIdMap.clear(),this.initialAnswerIdMap.set(e.id,!0)}addInitialAnswer(e){this.initialAnswerIdMap.has(e.id)||(this.initialAnswers.push(e),this.initialAnswerIdMap.set(e.id,!0))}clearInitialAnswers(){this.initialAnswers=[],this.initialAnswerIdMap.clear()}removeInitialAnswer(e){this.initialAnswers.splice(e.position,1),this.initialAnswerIdMap.delete(e.id)}}r([o.observableProperty,n("design:type",Array)],l.prototype,"initialAnswers",void 0),t.QuestionItem=l,t.default=l},function(e,t,i){var r,n,s=i(37),o=i(38),a=0,u=0;e.exports=function(e,t,i){var l=t&&i||0,c=t||[],p=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:n;if(null==p||null==d){var f=s();null==p&&(p=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=n=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:u+1,m=h-a+(y-u)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||h>a)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=y,n=d;var b=(1e4*(268435455&(h+=122192928e5))+y)%4294967296;c[l++]=b>>>24&255,c[l++]=b>>>16&255,c[l++]=b>>>8&255,c[l++]=255&b;var v=h/4294967296*1e4&268435455;c[l++]=v>>>8&255,c[l++]=255&v,c[l++]=v>>>24&15|16,c[l++]=v>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var _=0;_<6;++_)c[l+_]=p[_];return t||o(c)}},function(e,t,i){"use strict";var r,n=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(0),u=o(i(3)),l=i(9),c=o(i(12)),p=i(1);let d=r=class{constructor(e,t){this.type=p.DISPLAY,this.enableWhenIdMap=new Map,this.enableWhenFactory=new c.default(this),this.id=e&&e.id||u.default(),this.required=!!e&&!!e.required,this.text=e&&e.text,this.enableWhen=e&&e.enableWhen?e.enableWhen.map(e=>this.enableWhenFactory.createEnableWhen(e)):[],this.enableBehavior=e&&e.enableBehavior?e.enableBehavior:l.AND,this.parent=t,this.enableWhen.forEach(e=>this.enableWhenIdMap.set(e.id,!0)),this.definePrototypeProperties()}definePrototypeProperties(){Object.defineProperty(r.prototype,"position",{enumerable:!0,configurable:!0,get(){if(!this.parent)return;let e;return this.parent.items.find((t,i)=>{if(t.id===this.id)return e=i,!0}),e}})}addSiblingItemAfter(e){this.parent&&this.parent.addDescendantItemAfter(this,e)}addEnableWhen(e){this.enableWhenIdMap.has(e.id)||(this.enableWhen.push(e),this.enableWhenIdMap.set(e.id,!0))}removeEnableWhen(e){let t;this.enableWhen.find((i,r)=>{if(i.id===e.id)return t=r,!0}),void 0!==t&&(this.enableWhen.splice(t,1),this.enableWhenIdMap.delete(e.id))}updateItem(e){const t=a.getObservable(e);t&&t.mute(),this.id=e.id,this.text=e.text,this.required=!!e.required,t&&t.unmute(),t&&t.emitChange()}remove(){this.parent&&this.parent.removeItem(this)}replace(e){this.parent&&this.parent.replaceItem(this,e)}};n([a.observableProperty,s("design:type",Array)],d.prototype,"enableWhen",void 0),d=r=n([a.observable,s("design:paramtypes",[Object,Object])],d),t.Item=d,t.default=d},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(26));class s{constructor(e){this.parent=e}createAnswerOption(e){return new n.default(e,this.parent)}}t.AnswerOptionFactory=s,t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXISTS="EXISTS",t.EQUAL="==",t.NOT_EQUAL="!=",t.MORE=">",t.LESS="<",t.MORE_OR_EQUAL=">=",t.LESS_OR_EQUAL="<="},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(14),n=i(1);class s{constructor(e){this.itemFactory=new r.ItemFactory(e)}createItem(e){switch(e.type){case n.ATTACHMENT:return this.itemFactory.createAttachmentItem(e);case n.BOOLEAN:return this.itemFactory.createBooleanItem(e);case n.CHOICE:return this.itemFactory.createChoiceItem(e);case n.DATE:return this.itemFactory.createDateItem(e);case n.DATE_TIME:return this.itemFactory.createDateTimeItem(e);case n.DECIMAL:return this.itemFactory.createDecimalItem(e);case n.DISPLAY:return this.itemFactory.createItem(e);case n.GROUP:return this.itemFactory.createGroupItem(e);case n.MULTI_CHOICE:return this.itemFactory.createMultiChoiceItem(e);case n.OPEN_CHOICE:return this.itemFactory.createOpenChoiceItem(e);case n.STRING:return this.itemFactory.createStringItem(e);case n.TEXT:return this.itemFactory.createTextItem(e);case n.TIME:return this.itemFactory.createTimeItem(e);default:return this.itemFactory.createItem(e)}}}t.ItemByTypeFactory=s,t.default=s},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(30),s=r(i(33)),o=r(i(34)),a=r(i(35)),u=i(1),l=r(i(43)),c=r(i(44));t.questionResponseFactory={createResponse:(e,t,i)=>{const r=[];switch(e.required&&r.push(l.default.required),e.type){case u.STRING:return r.push(l.default.stringRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.TEXT:return r.push(l.default.textRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.DECIMAL:return r.push(l.default.decimalRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.BOOLEAN:return r.push(l.default.booleanRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.DATE:return r.push(l.default.dateRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.TIME:return r.push(l.default.timeRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.DATE_TIME:return r.push(l.default.dateTimeRegExp),new n.QuestionnaireResponseItem(i,e,o.default,r,t);case u.CHOICE:case u.OPEN_CHOICE:return new n.QuestionnaireResponseItem(i,e,s.default,r,t);case u.MULTI_CHOICE:return new n.QuestionnaireResponseItem(i,e,a.default,r,t);case u.ATTACHMENT:return new n.QuestionnaireResponseItem(i,e,c.default,r,t);default:return new n.QuestionnaireResponseItem(i,e,void 0,r,t)}}},t.default=t.questionResponseFactory},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AND="and",t.OR="or"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REQUIRED="Field is required",t.REG_EXP="Invalid input"},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(6),s=r(i(3));class o{constructor(e,t){this.id=e&&e.id||s.default(),this.questionId=e&&e.questionId,this.operator=e&&e.operator||n.EQUAL,this.answer=e&&e.answer,this.parent=t}remove(){this.parent&&this.parent.removeEnableWhen(this)}}t.EnableWhen=o,t.default=o},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(11));class s{constructor(e){this.parent=e}createEnableWhen(e){return new n.default(e,this.parent)}}t.EnableWhenFactory=s,t.default=s},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),a=s(i(7)),u=s(i(4)),l=i(1);let c=class extends u.default{constructor(e,t){super(e,t),this.type=l.GROUP,this.itemIdMap=new Map,this.itemByTypeFactory=new a.default(this),this.completeItems(e),this.items.forEach(e=>this.itemIdMap.set(e.id,!0))}addDescendantItemAfter(e,t){this.addItem(t,e.position+1)}completeItems(e){e&&e.items?this.items=e.items.map(e=>this.itemByTypeFactory.createItem(e)):this.items=[]}addItem(e,t){this.itemIdMap.has(e.id)||(e.parent=this,t=void 0===t?this.items.length:t,this.items.splice(t,0,e),this.itemIdMap.set(e.id,!0))}removeItem(e){this.items.splice(e.position,1),this.itemIdMap.delete(e.id)}replaceItem(e,t){const i=e.position;this.items.splice(i,1,t),this.itemIdMap.delete(e.id),this.itemIdMap.set(t.id,!0)}};r([o.observableProperty,n("design:type",Array)],c.prototype,"items",void 0),c=r([o.observable,n("design:paramtypes",[Object,Object])],c),t.GroupItem=c,t.default=c},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(15)),s=r(i(18)),o=r(i(4)),a=r(i(13)),u=r(i(19)),l=r(i(20)),c=r(i(21)),p=r(i(22)),d=r(i(23)),f=r(i(24)),h=r(i(25)),y=r(i(27)),m=r(i(28));class b{constructor(e){this.parent=e}createItem(e){return new o.default(e,this.parent)}createGroupItem(e){return new a.default(e,this.parent)}createTextItem(e){return new n.default(e,this.parent)}createStringItem(e){return new u.default(e,this.parent)}createDecimalItem(e){return new l.default(e,this.parent)}createBooleanItem(e){return new s.default(e,this.parent)}createTimeItem(e){return new c.default(e,this.parent)}createDateItem(e){return new p.default(e,this.parent)}createDateTimeItem(e){return new d.default(e,this.parent)}createAttachmentItem(e){return new f.default(e,this.parent)}createChoiceItem(e){return new y.default(e,this.parent)}createOpenChoiceItem(e){return new h.default(e,this.parent)}createMultiChoiceItem(e){return new m.default(e,this.parent)}}t.ItemFactory=b,t.default=b},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1),s=i(2);let o=class extends s.QuestionItem{constructor(){super(...arguments),this.type=n.TEXT}};o=r([i(0).observable],o),t.TextItem=o,t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);class n{constructor(e){this.parent=e}createInitialAnswer(e){return new r.InitialAnswer(e,this.parent)}}t.InitialAnswerFactory=n,t.default=n},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});r(i(39));const n=r(i(3));class s{constructor(e,t){this.id=e&&e.id||n.default(),this.value=e&&e.value,this.parent=t,Object.defineProperty(s.prototype,"position",{enumerable:!0,configurable:!0,get(){if(!this.parent)return;let e;return this.parent.initialAnswers.find((t,i)=>{if(t.id===this.id)return e=i,!0}),e}})}updateInitialAnswer(e){this.id=e.id,this.value=e.value}setValue(e){this.value=e}remove(){this.parent&&this.parent.removeInitialAnswer(this)}}t.InitialAnswer=s},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),o=i(0),a=n(i(2));let u=class extends a.default{constructor(){super(...arguments),this.type=s.BOOLEAN}};u=r([o.observable],u),t.BooleanItem=u,t.default=u},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1),s=i(2);let o=class extends s.QuestionItem{constructor(){super(...arguments),this.type=n.STRING}};o=r([i(0).observable],o),t.StringItem=o,t.default=o},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),o=i(0),a=n(i(2));let u=class extends a.default{constructor(){super(...arguments),this.type=s.DECIMAL}};u=r([o.observable],u),t.DecimalItem=u,t.default=u},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=n(i(2)),a=i(1);let u=class extends o.default{constructor(){super(...arguments),this.type=a.TIME}};u=r([s.observable],u),t.TimeItem=u,t.default=u},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=n(i(2)),a=i(1);let u=class extends o.default{constructor(){super(...arguments),this.type=a.DATE}};u=r([s.observable],u),t.DateItem=u,t.default=u},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=i(1),a=n(i(2));let u=class extends a.default{constructor(){super(...arguments),this.type=o.DATE_TIME}};u=r([s.observable],u),t.DateTimeItem=u,t.default=u},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(1),a=i(0),u=s(i(2));let l=class extends u.default{constructor(e,t){super(e,t),this.type=o.ATTACHMENT,this.multipleFiles=!(!e||!e.multipleFiles)}updateItem(e){const t=a.getObservable(e);t&&t.mute(),this.multipleFiles=e.multipleFiles,t&&t.unmute(),super.updateItem(e)}};l=r([a.observable,n("design:paramtypes",[Object,Object])],l),t.AttachmentItem=l,t.default=l},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(1),a=i(0),u=s(i(5)),l=s(i(2));let c=class extends l.default{constructor(e,t){super(e,t),this.type=o.OPEN_CHOICE,this.optionIdMap=new Map,this.answerOptionFactory=new u.default(this),this.completeOptions(e),this.options.forEach(e=>this.optionIdMap.set(e.id,!0))}clearInitialAnswers(){this.defaultOption&&(this.defaultOption.defaultSelected=!1)}selectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(this.defaultOption&&(this.defaultOption.defaultSelected=!1),this.defaultOption=t,this.defaultOption.defaultSelected=!0)}unselectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(t.defaultSelected=!1,this.defaultOption=void 0)}completeOptions(e){e&&e.options&&0!==e.options.length?this.options=e.options.map(e=>this.answerOptionFactory.createAnswerOption(e)):this.options=[this.answerOptionFactory.createAnswerOption()]}addAnswerOption(e){this.optionIdMap.has(e.id)||(this.options.splice(this.options.length-1,0,e),this.optionIdMap.set(e.id,!0))}removeAnswerOption(e){e.position!==this.options.length-1&&(this.options.splice(e.position,1),this.optionIdMap.delete(e.id))}};r([a.observableProperty,n("design:type",Array)],c.prototype,"options",void 0),c=r([a.observable,n("design:paramtypes",[Object,Object])],c),t.OpenChoiceItem=c,t.default=c},function(e,t,i){"use strict";var r,n=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(i(3)),u=i(0);let l=r=class{constructor(e,t){this.id=e&&e.id||a.default(),this.value=e&&e.value,this.parent=t,this.defaultSelected=!!e&&!!e.defaultSelected,Object.defineProperty(r.prototype,"position",{enumerable:!0,configurable:!0,get(){if(!this.parent)return;let e;return this.parent.options.find((t,i)=>{if(t.id===this.id)return e=i,!0}),e}})}selectAsDefault(){this.parent&&this.parent.selectDefaultOption(this)}unselectAsDefault(){this.parent&&this.parent.unselectDefaultOption(this)}updateAnswerOption(e){this.id=e.id,this.value=e.value}setValue(e){this.value=e}remove(){this.parent&&this.parent.removeAnswerOption(this)}};l=r=n([u.observable,s("design:paramtypes",[Object,Object])],l),t.AnswerOption=l,t.default=l},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),a=s(i(2)),u=i(1),l=s(i(5));let c=class extends a.default{constructor(e,t){super(e,t),this.type=u.CHOICE,this.optionIdMap=new Map,this.answerOptionFactory=new l.default(this),this.completeOptions(e),this.options.forEach(e=>this.optionIdMap.set(e.id,!0))}completeOptions(e){e&&e.options?this.options=e.options.map(e=>this.answerOptionFactory.createAnswerOption(e)):this.options=[]}setSingleInitialAnswer(e){}addInitialAnswer(e){}clearInitialAnswers(){this.defaultOption&&(this.defaultOption.defaultSelected=!1)}selectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(this.defaultOption&&(this.defaultOption.defaultSelected=!1),this.defaultOption=t,this.defaultOption.defaultSelected=!0)}unselectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(t.defaultSelected=!1,this.defaultOption=void 0)}addAnswerOption(e){this.optionIdMap.has(e.id)||(this.options.push(e),this.optionIdMap.set(e.id,!0))}removeAnswerOption(e){this.options.splice(e.position,1),this.optionIdMap.delete(e.id)}};r([o.observableProperty,n("design:type",Array)],c.prototype,"options",void 0),c=r([o.observable,n("design:paramtypes",[Object,Object])],c),t.ChoiceItem=c,t.default=c},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(2)),a=i(1),u=i(0),l=s(i(5));let c=class extends o.default{constructor(e,t){super(e,t),this.type=a.MULTI_CHOICE,this.optionIdMap=new Map,this.answerOptionFactory=new l.default(this),this.completeOptions(e),this.options.forEach(e=>this.optionIdMap.set(e.id,!0))}clearInitialAnswers(){this.options.forEach(e=>{e.defaultSelected=!1})}selectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(t.defaultSelected=!0)}unselectDefaultOption(e){const t=this.options.find(t=>t.id===e.id);t&&(t.defaultSelected=!1)}completeOptions(e){e&&e.options?this.options=e.options.map(e=>this.answerOptionFactory.createAnswerOption(e)):this.options=[]}addAnswerOption(e){this.optionIdMap.has(e.id)||(this.options.push(e),this.optionIdMap.set(e.id,!0))}removeAnswerOption(e){this.options.splice(e.position,1),this.optionIdMap.delete(e.id)}};r([u.observableProperty,n("design:type",Array)],c.prototype,"options",void 0),c=r([u.observable,n("design:paramtypes",[Object,Object])],c),t.MultiChoiceItem=c,t.default=c},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);let o=class{constructor(e){this.answers=e||[]}updateResponseAnswers(e,t){const i=s.getObservable(this);i&&i.mute(),this.answers=this.answers.filter(t=>t.parentId!==e),t.forEach(t=>{this.answers.push({parentId:e,value:t.value})}),i&&i.unmute(),i&&i.emitChange()}};o=r([s.observable,n("design:paramtypes",[Array])],o),t.AnswerCollection=o,t.default=o},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=i(0),u=s(i(3)),l=s(i(31)),c=s(i(29)),p=s(i(42)),d=s(i(8)),f=o(i(6));let h=class{constructor(e,t,i,r,n){this.answerFactory=new l.default(this),this.errorMessages=[],this.isEnable=!0,this.itemIdMap=new Map,this.answerIdMap=new Map,this.id=e&&e.id||u.default(),this.questionId=t.id,this.text=t.text,this.answerCollection=n,this.fillAnswers(e,t),this.fillItems(e,t),this.validationRules=r,this.replyStrategy=i,this.questionItem=t,this.validate(),this.decideEnablingObservation(),this.answerCollection.updateResponseAnswers(this.questionId,this.answers),this.defineOwnProperties(),this.items.forEach(e=>this.itemIdMap.set(e.id,!0)),this.answers.forEach(e=>this.answerIdMap.set(e.id,!0))}defineOwnProperties(){Object.defineProperty(this,"isValid",{get(){return 0===this.errorMessages.length}})}fillAnswers(e,t){if(e&&e.answers)this.answers=e.answers.map(e=>this.answerFactory.createAnswer(e));else{const e=t.initialAnswers;e&&e.length?this.answers=e.map(e=>this.answerFactory.createAnswer(e)):t.options?this.answers=t.options.filter(e=>e.defaultSelected&&e).map(e=>this.answerFactory.createAnswer(e)):this.answers=[]}}fillItems(e,t){t.items?this.items=t.items.map(t=>{const i=e&&e.items&&e.items.find(e=>e.questionId===t.id);return d.default.createResponse(t,this.answerCollection,i)}):this.items=[]}decideEnablingObservation(){if(this.questionItem.enableWhen&&this.questionItem.enableWhen.length){const e=a.getObservable(this.answerCollection);e&&e.subscribe(this.evaluateEnableWhen.bind(this))}}initiateEnableWhen(){this.items.forEach(e=>e.initiateEnableWhen()),this.evaluateEnableWhen(this.answerCollection)}evaluateEnableWhen(e){if(void 0===this.questionItem.enableBehavior||!this.questionItem.enableWhen||this.questionItem.enableWhen.length<1)return;const t=e.answers,i=this.questionItem.enableWhen.filter(e=>!!e.questionId&&(void 0!==e.answer||e.operator===f.EXISTS)).map(e=>{if(e.operator===f.EXISTS)return void 0!==t.find(t=>t.parentId===e.questionId);return t.filter(t=>t.parentId===e.questionId).some(t=>p.default.apply({[e.operator]:[""+t.value,""+e.answer]}))});this.isEnable=p.default.apply({[this.questionItem.enableBehavior]:i})}setReplyStrategy(e){const t=a.getObservable(this);t&&t.mute(),this.replyStrategy=e,t&&t.unmute()}validate(){const e=[];this.validationRules.forEach(t=>{const i=t(this.answers[0]&&this.answers[0].value);i&&e.push(i)}),this.errorMessages=e}reply(e){if(!this.replyStrategy)return;const t=a.getObservable(this);t&&t.mute(),this.replyStrategy(e,this,this.answerFactory),this.validate(),t&&t.unmute(),t&&t.emitChange(),this.answerCollection.updateResponseAnswers(this.questionId,this.answers)}addQuestionnaireResponseItem(e){this.itemIdMap.has(e.id)||(e.answerCollection=this.answerCollection,this.items.push(e),this.itemIdMap.set(e.id,!0))}updateQuestionnaireResponseItem(e){Object.assign(this,e)}setSingleAnswer(e){this.answers.splice(0,this.answers.length,e),this.answerIdMap.clear(),this.answerIdMap.set(e.id,!0)}addAnswer(e,t){this.itemIdMap.has(e.id)||(t=void 0===t?this.answers.length:t,this.answers.splice(t,0,e),this.answerIdMap.set(e.id,!0))}removeAnswer(e){this.answers.splice(e.position,1),this.answerIdMap.delete(e.id)}};r([a.observableProperty,n("design:type",Array)],h.prototype,"items",void 0),r([a.observableProperty,n("design:type",Array)],h.prototype,"answers",void 0),h=r([a.observable,n("design:paramtypes",[Object,Object,Function,Array,c.default])],h),t.QuestionnaireResponseItem=h,t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(32);class n{constructor(e){this.parent=e}createAnswer(e){return new r.Answer(e,this.parent)}}t.AnswerFactory=n,t.default=n},function(e,t,i){"use strict";var r,n=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(i(3)),u=i(0);let l=r=class{constructor(e,t){this.itemIdMap=new Map,this.id=e&&e.id||a.default(),this.parent=t,this.items=[],this.value=e&&e.value,Object.defineProperty(r.prototype,"position",{enumerable:!0,configurable:!0,get(){if(!this.parent)return;let e;return this.parent.answers.find((t,i)=>{if(t.id===this.id)return e=i,!0}),e}}),this.items.forEach(e=>this.itemIdMap.set(e.id,!0))}addQuestionnaireResponseItem(e){this.itemIdMap.has(e.id)||(this.items.push(e),this.itemIdMap.set(e.id,!0))}updateAnswer(e){Object.assign(this,e)}setValue(e){this.value=e}remove(){this.parent&&this.parent.removeAnswer(this)}};n([u.observableProperty,s("design:type",Array)],l.prototype,"items",void 0),l=r=n([u.observable,s("design:paramtypes",[Object,Object])],l),t.Answer=l,t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.choiceStrategy=(e,t,i)=>{const r=t.answers[0]||i.createAnswer(),n=t.questionItem.options.find(t=>t.id===e);n&&r.updateAnswer(Object.assign(Object.assign({},r),{id:n.id,value:n.value})),t.setSingleAnswer(r)},t.default=t.choiceStrategy},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textInputStrategy=(e,t,i)=>{if(t.answers[0]){const i=t.answers[0];""!==e&&void 0!==e?i.setValue(e):i.remove()}else if(""!==e&&void 0!==e){const r=i.createAnswer({value:e});t.setSingleAnswer(r)}},t.default=t.textInputStrategy},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiChoiceStrategy=(e,t,i)=>{const r=t.questionItem.options.find(t=>t.id===e);if(!r)return;const n=t.answers.find(e=>e.id===r.id);n?n.remove():t.addAnswer(i.createAnswer({id:r.id,value:r.value}))},t.default=t.multiChoiceStrategy},function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(1)),r(i(9)),r(i(6)),r(i(10)),r(i(11)),r(i(4)),r(i(13)),r(i(2)),r(i(24)),r(i(18)),r(i(27)),r(i(22)),r(i(23)),r(i(20)),r(i(25)),r(i(19)),r(i(15)),r(i(21)),r(i(28)),r(i(40)),r(i(41)),r(i(30)),r(i(32)),r(i(17)),r(i(26)),r(i(14)),r(i(31)),r(i(16)),r(i(5)),r(i(8)),r(i(12)),r(i(7)),r(i(33)),r(i(35)),r(i(34))},function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);e.exports=function(){return i(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,n=i;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(3)),a=i(0),u=s(i(7));let l=class{constructor(e){this.itemIdMap=new Map,this.itemByTypeFactory=new u.default(this),this.id=e&&e.id||o.default(),this.description=e&&e.description,this.title=e&&e.title,this.completeItems(e),this.items.forEach(e=>this.itemIdMap.set(e.id,!0))}completeItems(e){e&&e.items?this.items=e.items.map(e=>this.itemByTypeFactory.createItem(e)):this.items=[]}addDescendantItemAfter(e,t){this.addItem(t,e.position+1)}updateQuestionnaire(e){const t=a.getObservable(this);t&&t.mute(),this.description=e.description,this.title=e.title,this.id=e.id,t&&t.unmute(),t&&t.emitChange()}addItem(e,t){this.itemIdMap.has(e.id)||(e.parent=this,t=void 0===t?this.items.length:t,this.items.splice(t,0,e),this.itemIdMap.set(e.id,!0))}removeItem(e){this.items.splice(e.position,1),this.itemIdMap.delete(e.id)}replaceItem(e,t){const i=e.position;this.items.splice(i,1,t),this.itemIdMap.delete(e.id),this.itemIdMap.set(t.id,!0)}};r([a.observableProperty,n("design:type",Array)],l.prototype,"items",void 0),l=r([a.observable,n("design:paramtypes",[Object])],l),t.Questionnaire=l,t.default=l},function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(3)),a=i(0),u=s(i(29)),l=s(i(8));let c=class{constructor(e,t){this.answerCollection=new u.default,this.itemIdMap=new Map,this.id=t&&t.id||o.default(),this.questionnaireId=e.id,e.items?this.items=e.items.map(e=>{const i=t&&t.items&&t.items.find(t=>t.questionId===e.id);return l.default.createResponse(e,this.answerCollection,i)}):this.items=[],this.items.forEach(e=>this.itemIdMap.set(e.id,!0)),this.items.forEach(e=>e.initiateEnableWhen())}addQuestionnaireResponseItem(e){this.itemIdMap.has(e.id)||(e.answerCollection=this.answerCollection,this.items.push(e),this.itemIdMap.set(e.id,!0))}updateQuestionnaireResponse(e){this.id=e.id,this.questionnaireId=e.questionnaireId}};r([a.observableProperty,n("design:type",Array)],c.prototype,"items",void 0),c=r([a.observable,n("design:paramtypes",[Object,Object])],c),t.QuestionnaireResponse=c,t.default=c},function(e,t,i){var r,n;void 0===(n="function"==typeof(r=function(){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e={},t={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t,i){return void 0===i?e<t:e<t&&t<i},"<=":function(e,t,i){return void 0===i?e<=t:e<=t&&t<=i},"!!":function(t){return e.truthy(t)},"!":function(t){return!e.truthy(t)},"%":function(e,t){return e%t},log:function(e){return console.log(e),e},in:function(e,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(e,t,i){if(i<0){var r=String(e).substr(t);return r.substr(0,r.length+i)}return String(e).substr(t,i)},"+":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)+parseFloat(t,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)*parseFloat(t,10)}))},"-":function(e,t){return void 0===t?-e:e-t},"/":function(e,t){return e/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(e,t){return e.concat(t)}),[])},var:function(e,t){var i=void 0===t?null:t,r=this;if(void 0===e||""===e||null===e)return r;for(var n=String(e).split("."),s=0;s<n.length;s++){if(null===r)return i;if(void 0===(r=r[n[s]]))return i}return r},missing:function(){for(var t=[],i=Array.isArray(arguments[0])?arguments[0]:arguments,r=0;r<i.length;r++){var n=i[r],s=e.apply({var:n},this);null!==s&&""!==s||t.push(n)}return t},missing_some:function(t,i){var r=e.apply({missing:i},this);return i.length-r.length>=t?[]:r},method:function(e,t,i){return e[t].apply(e,i)}};return e.is_logic=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length},e.truthy=function(e){return!(Array.isArray(e)&&0===e.length||!e)},e.get_operator=function(e){return Object.keys(e)[0]},e.get_values=function(t){return t[e.get_operator(t)]},e.apply=function(i,r){if(Array.isArray(i))return i.map((function(t){return e.apply(t,r)}));if(!e.is_logic(i))return i;r=r||{};var n,s,o,a,u,l=e.get_operator(i),c=i[l];if(Array.isArray(c)||(c=[c]),"if"===l||"?:"==l){for(n=0;n<c.length-1;n+=2)if(e.truthy(e.apply(c[n],r)))return e.apply(c[n+1],r);return c.length===n+1?e.apply(c[n],r):null}if("and"===l){for(n=0;n<c.length;n+=1)if(s=e.apply(c[n],r),!e.truthy(s))return s;return s}if("or"===l){for(n=0;n<c.length;n+=1)if(s=e.apply(c[n],r),e.truthy(s))return s;return s}if("filter"===l)return a=e.apply(c[0],r),o=c[1],Array.isArray(a)?a.filter((function(t){return e.truthy(e.apply(o,t))})):[];if("map"===l)return a=e.apply(c[0],r),o=c[1],Array.isArray(a)?a.map((function(t){return e.apply(o,t)})):[];if("reduce"===l)return a=e.apply(c[0],r),o=c[1],u=void 0!==c[2]?c[2]:null,Array.isArray(a)?a.reduce((function(t,i){return e.apply(o,{current:i,accumulator:t})}),u):u;if("all"===l){if(a=e.apply(c[0],r),o=c[1],!a.length)return!1;for(n=0;n<a.length;n+=1)if(!e.truthy(e.apply(o,a[n])))return!1;return!0}if("none"===l)return 0===e.apply({filter:c},r).length;if("some"===l)return e.apply({filter:c},r).length>0;if(c=c.map((function(t){return e.apply(t,r)})),"function"==typeof t[l])return t[l].apply(r,c);if(l.indexOf(".")>0){var p=String(l).split("."),d=t;for(n=0;n<p.length;n++)if(void 0===(d=d[p[n]]))throw new Error("Unrecognized operation "+l+" (failed at "+p.slice(0,n+1).join(".")+")");return d.apply(r,c)}throw new Error("Unrecognized operation "+l)},e.uses_data=function(t){var i=[];if(e.is_logic(t)){var r=e.get_operator(t),n=t[r];Array.isArray(n)||(n=[n]),"var"===r?i.push(n[0]):n.map((function(t){i.push.apply(i,e.uses_data(t))}))}return function(e){for(var t=[],i=0,r=e.length;i<r;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}(i)},e.add_operation=function(e,i){t[e]=i},e.rm_operation=function(e){delete t[e]},e.rule_like=function(t,i){if(i===t)return!0;if("@"===i)return!0;if("number"===i)return"number"==typeof t;if("string"===i)return"string"==typeof t;if("array"===i)return Array.isArray(t)&&!e.is_logic(t);if(e.is_logic(i)){if(e.is_logic(t)){var r=e.get_operator(i),n=e.get_operator(t);if("@"===r||r===n)return e.rule_like(e.get_values(t,!1),e.get_values(i,!1))}return!1}if(Array.isArray(i)){if(Array.isArray(t)){if(i.length!==t.length)return!1;for(var s=0;s<i.length;s+=1)if(!e.rule_like(t[s],i[s]))return!1;return!0}return!1}return!1},e})?r.call(t,i,t,e):r)||(e.exports=n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(10),n=/[ \r\n\t\S]+/,s=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?/,o=/true|false/,a=/([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1]))?)?/,u=/([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\.[0-9]+)?/,l=/([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)))?)?)?/,c=(e,t)=>t.test(""+e)||""===e||void 0===e?void 0:r.REG_EXP;t.validators={stringRegExp:e=>c(e,n),textRegExp:e=>c(e,n),decimalRegExp:e=>c(e,s),booleanRegExp:e=>c(e,o),dateRegExp:e=>c(e,a),timeRegExp:e=>c(e,u),dateTimeRegExp:e=>c(e,l),required:e=>(e=>void 0!==e&&""!==e?void 0:r.REQUIRED)(e)},t.default=t.validators},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachmentStrategy=(e,t,i)=>{const r=t.answers.find(t=>t.value===e);r?r.remove():t.questionItem.multipleFiles?t.addAnswer(i.createAnswer({value:e})):t.setSingleAnswer(i.createAnswer({value:e}))},t.default=t.attachmentStrategy}])}));