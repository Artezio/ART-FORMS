!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@artezio/observable-react"),require("@artezio/models")):"function"==typeof define&&define.amd?define(["react","@artezio/observable-react","@artezio/models"],t):"object"==typeof exports?exports.Designer=t(require("react"),require("@artezio/observable-react"),require("@artezio/models")):e.Designer=t(e.react,e["@artezio/observable-react"],e["@artezio/models"])}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Form",(function(){return Xn})),n.d(t,"FormProvider",(function(){return $n})),n.d(t,"withFormApi",(function(){return sr})),n.d(t,"withFormState",(function(){return ur})),n.d(t,"withFieldApi",(function(){return mr})),n.d(t,"withFieldState",(function(){return pr})),n.d(t,"withRadioGroup",(function(){return vr})),n.d(t,"asField",(function(){return gr})),n.d(t,"useForm",(function(){return Yn})),n.d(t,"useField",(function(){return rr})),n.d(t,"useFieldApi",(function(){return dr})),n.d(t,"useFieldState",(function(){return hr})),n.d(t,"useFormApi",(function(){return zn})),n.d(t,"useFormState",(function(){return Kn})),n.d(t,"Text",(function(){return Er})),n.d(t,"Radio",(function(){return wr})),n.d(t,"TextArea",(function(){return Cr})),n.d(t,"Select",(function(){return xr})),n.d(t,"Option",(function(){return Ir})),n.d(t,"Checkbox",(function(){return Fr})),n.d(t,"RadioGroup",(function(){return Nr})),n.d(t,"BasicText",(function(){return yr})),n.d(t,"BasicRadio",(function(){return _r})),n.d(t,"BasicRadioGroup",(function(){return Mr})),n.d(t,"BasicTextArea",(function(){return Or})),n.d(t,"BasicSelect",(function(){return Sr})),n.d(t,"BasicCheckbox",(function(){return Tr})),n.d(t,"Scope",(function(){return Jn})),n.d(t,"ArrayField",(function(){return lr})),n.d(t,"useArrayField",(function(){return ar}));var i=n(0),o=n.n(i),a=n(11);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?g(e):t}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function w(e,t){return e(t={exports:{}},t.exports),t.exports}var O=w((function(e){function t(e,t){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t[Math.abs(n)%t.length]}function n(e,t){var n=t.namespace;if(t.useColors){var r=t.color,i="  ".concat("[3"+(r<8?r:"8;5;"+r),";1m").concat(n," [0m");e[0]=i+e[0].split("\n").join("\n"+i)}else e[0]=n+" "+e[0]}function i(e,t){if(e[0]=(t.useColors?"%c":"")+t.namespace,t.useColors){var n="color: "+t.color,r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)}}var o=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e&&i.unshift(e);var a=n.namespaces.split(",").map((function(e){return"*"===e[e.length-1]?new RegExp("^"+e.slice(0,e.length-1)+".*$"):new RegExp("^"+e+"$")}));a.some((function(t){return t.test(e)})),t(e,n.colors),n.useColors}}void 0===r||"renderer"===r.type||!0===r.browser||r.__nwjs?e.exports=function(e){return a(e,function(){var e;try{e=localStorage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),{namespaces:e||"",colors:o,useColors:!0,formatArgs:i}}())}:e.exports=function(e){return a(e,{namespaces:r.env.DEBUG||"",colors:[6,2,3,4,5,1],useColors:!0,formatArgs:n})}})),C="object"==typeof _&&_&&_.Object===Object&&_,A="object"==typeof self&&self&&self.Object===Object&&self,S=C||A||Function("return this")(),x=S.Symbol,I=Object.prototype,T=I.hasOwnProperty,F=I.toString,M=x?x.toStringTag:void 0;var N=function(e){var t=T.call(e,M),n=e[M];try{e[M]=void 0;var r=!0}catch(e){}var i=F.call(e);return r&&(t?e[M]=n:delete e[M]),i},D=Object.prototype.toString;var j=function(e){return D.call(e)},P="[object Null]",k="[object Undefined]",R=x?x.toStringTag:void 0;var L=function(e){return null==e?void 0===e?k:P:R&&R in Object(e)?N(e):j(e)};var B=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},V="[object AsyncFunction]",q="[object Function]",G="[object GeneratorFunction]",W="[object Proxy]";var $,H=function(e){if(!B(e))return!1;var t=L(e);return t==q||t==G||t==V||t==W},U=S["__core-js_shared__"],Y=($=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var Q=function(e){return!!Y&&Y in e},X=Function.prototype.toString;var z=function(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""},K=/^\[object .+?Constructor\]$/,J=Function.prototype,Z=Object.prototype,ee=J.toString,te=Z.hasOwnProperty,ne=RegExp("^"+ee.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var re=function(e){return!(!B(e)||Q(e))&&(H(e)?ne:K).test(z(e))};var ie=function(e,t){return null==e?void 0:e[t]};var oe=function(e,t){var n=ie(e,t);return re(n)?n:void 0},ae=function(){try{var e=oe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var le=function(e,t,n){"__proto__"==t&&ae?ae(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var se=function(e,t){return e===t||e!=e&&t!=t},ue=Object.prototype.hasOwnProperty;var ce=function(e,t,n){var r=e[t];ue.call(e,t)&&se(r,n)&&(void 0!==n||t in e)||le(e,t,n)},de=Array.isArray;var fe=function(e){return null!=e&&"object"==typeof e},he="[object Symbol]";var pe=function(e){return"symbol"==typeof e||fe(e)&&L(e)==he},me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/;var ge=function(e,t){if(de(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!pe(e))||(ve.test(e)||!me.test(e)||null!=t&&e in Object(t))},be=oe(Object,"create");var ye=function(){this.__data__=be?be(null):{},this.size=0};var Ee=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e="__lodash_hash_undefined__",we=Object.prototype.hasOwnProperty;var Oe=function(e){var t=this.__data__;if(be){var n=t[e];return n===_e?void 0:n}return we.call(t,e)?t[e]:void 0},Ce=Object.prototype.hasOwnProperty;var Ae=function(e){var t=this.__data__;return be?void 0!==t[e]:Ce.call(t,e)},Se="__lodash_hash_undefined__";var xe=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=be&&void 0===t?Se:t,this};function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=ye,Ie.prototype.delete=Ee,Ie.prototype.get=Oe,Ie.prototype.has=Ae,Ie.prototype.set=xe;var Te=Ie;var Fe=function(){this.__data__=[],this.size=0};var Me=function(e,t){for(var n=e.length;n--;)if(se(e[n][0],t))return n;return-1},Ne=Array.prototype.splice;var De=function(e){var t=this.__data__,n=Me(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ne.call(t,n,1),--this.size,!0)};var je=function(e){var t=this.__data__,n=Me(t,e);return n<0?void 0:t[n][1]};var Pe=function(e){return Me(this.__data__,e)>-1};var ke=function(e,t){var n=this.__data__,r=Me(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Re.prototype.clear=Fe,Re.prototype.delete=De,Re.prototype.get=je,Re.prototype.has=Pe,Re.prototype.set=ke;var Le=Re,Be=oe(S,"Map");var Ve=function(){this.size=0,this.__data__={hash:new Te,map:new(Be||Le),string:new Te}};var qe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ge=function(e,t){var n=e.__data__;return qe(t)?n["string"==typeof t?"string":"hash"]:n.map};var We=function(e){var t=Ge(this,e).delete(e);return this.size-=t?1:0,t};var $e=function(e){return Ge(this,e).get(e)};var He=function(e){return Ge(this,e).has(e)};var Ue=function(e,t){var n=Ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ye.prototype.clear=Ve,Ye.prototype.delete=We,Ye.prototype.get=$e,Ye.prototype.has=He,Ye.prototype.set=Ue;var Qe=Ye,Xe="Expected a function";function ze(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Xe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ze.Cache||Qe),n}ze.Cache=Qe;var Ke=ze,Je=500;var Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/\\(\\)?/g,tt=function(e){var t=Ke(e,(function(e){return n.size===Je&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ze,(function(e,n,r,i){t.push(r?i.replace(et,"$1"):n||e)})),t}));var nt=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},rt=1/0,it=x?x.prototype:void 0,ot=it?it.toString:void 0;var at=function e(t){if("string"==typeof t)return t;if(de(t))return nt(t,e)+"";if(pe(t))return ot?ot.call(t):"";var n=t+"";return"0"==n&&1/t==-rt?"-0":n};var lt=function(e){return null==e?"":at(e)};var st=function(e,t){return de(e)?e:ge(e,t)?[e]:tt(lt(e))},ut=9007199254740991,ct=/^(?:0|[1-9]\d*)$/;var dt=function(e,t){var n=typeof e;return!!(t=null==t?ut:t)&&("number"==n||"symbol"!=n&&ct.test(e))&&e>-1&&e%1==0&&e<t},ft=1/0;var ht=function(e){if("string"==typeof e||pe(e))return e;var t=e+"";return"0"==t&&1/e==-ft?"-0":t};var pt=function(e,t,n,r){if(!B(e))return e;for(var i=-1,o=(t=st(t,e)).length,a=o-1,l=e;null!=l&&++i<o;){var s=ht(t[i]),u=n;if(i!=a){var c=l[s];void 0===(u=r?r(c,s,l):void 0)&&(u=B(c)?c:dt(t[i+1])?[]:{})}ce(l,s,u),l=l[s]}return e};var mt=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:pt(e,t,n,r)};var vt=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var gt=function(e,t){for(var n=0,r=(t=st(t,e)).length;null!=e&&n<r;)e=e[ht(t[n++])];return n&&n==r?e:void 0};var bt=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var yt=function(e,t){return t.length<2?e:gt(e,bt(t,0,-1))};var Et=function(e,t){return t=st(t,e),null==(e=yt(e,t))||delete e[ht(vt(t))]};var _t=function(e,t){return null==e||Et(e,t)};var wt=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Ot=function(e){return de(e)?nt(e,ht):pe(e)?[e]:wt(tt(lt(e)))};var Ct=function(e,t,n){var r=null==e?void 0:gt(e,t);return void 0===r?n:r},At=Object.prototype.hasOwnProperty;var St=function(e,t){return null!=e&&At.call(e,t)},xt="[object Arguments]";var It=function(e){return fe(e)&&L(e)==xt},Tt=Object.prototype,Ft=Tt.hasOwnProperty,Mt=Tt.propertyIsEnumerable,Nt=It(function(){return arguments}())?It:function(e){return fe(e)&&Ft.call(e,"callee")&&!Mt.call(e,"callee")},Dt=9007199254740991;var jt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Dt};var Pt=function(e,t,n){for(var r=-1,i=(t=st(t,e)).length,o=!1;++r<i;){var a=ht(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&jt(i)&&dt(a,i)&&(de(e)||Nt(e))};var kt=function(e,t){return null!=e&&Pt(e,t,St)};var Rt=function(e,t){return nt(t,(function(t){return e[t]}))};var Lt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Bt=function(){return!1},Vt=w((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?S.Buffer:void 0,o=(i?i.isBuffer:void 0)||Bt;e.exports=o})),qt={};qt["[object Float32Array]"]=qt["[object Float64Array]"]=qt["[object Int8Array]"]=qt["[object Int16Array]"]=qt["[object Int32Array]"]=qt["[object Uint8Array]"]=qt["[object Uint8ClampedArray]"]=qt["[object Uint16Array]"]=qt["[object Uint32Array]"]=!0,qt["[object Arguments]"]=qt["[object Array]"]=qt["[object ArrayBuffer]"]=qt["[object Boolean]"]=qt["[object DataView]"]=qt["[object Date]"]=qt["[object Error]"]=qt["[object Function]"]=qt["[object Map]"]=qt["[object Number]"]=qt["[object Object]"]=qt["[object RegExp]"]=qt["[object Set]"]=qt["[object String]"]=qt["[object WeakMap]"]=!1;var Gt=function(e){return fe(e)&&jt(e.length)&&!!qt[L(e)]};var Wt=function(e){return function(t){return e(t)}},$t=w((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n&&C.process,o=function(){try{var e=r&&r.require&&r.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),Ht=$t&&$t.isTypedArray,Ut=Ht?Wt(Ht):Gt,Yt=Object.prototype.hasOwnProperty;var Qt=function(e,t){var n=de(e),r=!n&&Nt(e),i=!n&&!r&&Vt(e),o=!n&&!r&&!i&&Ut(e),a=n||r||i||o,l=a?Lt(e.length,String):[],s=l.length;for(var u in e)!t&&!Yt.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||dt(u,s))||l.push(u);return l},Xt=Object.prototype;var zt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Xt)};var Kt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Jt=Object.prototype.hasOwnProperty;var Zt=function(e){if(!zt(e))return Kt(e);var t=[];for(var n in Object(e))Jt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var en=function(e){return null!=e&&jt(e.length)&&!H(e)};var tn=function(e){return en(e)?Qt(e):Zt(e)};var nn=function(e){return null==e?[]:Rt(e,tn(e))};var rn=function(e,t){for(var n=-1,r=t.length,i=Array(r),o=null==e;++n<r;)i[n]=o?void 0:Ct(e,t[n]);return i},on=Array.prototype.splice;var an=function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;dt(i)?on.call(e,i,1):Et(e,i)}}return e};var ln=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=pe(e),a=void 0!==t,l=null===t,s=t==t,u=pe(t);if(!l&&!u&&!o&&e>t||o&&a&&s&&!l&&!u||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!s)return-1}return 0};var sn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},un=x?x.isConcatSpreadable:void 0;var cn=function(e){return de(e)||Nt(e)||!!(un&&e&&e[un])};var dn=function e(t,n,r,i,o){var a=-1,l=t.length;for(r||(r=cn),o||(o=[]);++a<l;){var s=t[a];n>0&&r(s)?n>1?e(s,n-1,r,i,o):sn(o,s):i||(o[o.length]=s)}return o};var fn=function(e){return(null==e?0:e.length)?dn(e,1):[]};var hn=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},pn=Math.max;var mn=function(e,t,n){return t=pn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pn(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),hn(e,this,l)}};var vn=function(e){return function(){return e}};var gn=function(e){return e},bn=ae?function(e,t){return ae(e,"toString",{configurable:!0,enumerable:!1,value:vn(t),writable:!0})}:gn,yn=800,En=16,_n=Date.now;var wn=function(e){var t=0,n=0;return function(){var r=_n(),i=En-(r-n);if(n=r,i>0){if(++t>=yn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(bn);On=function(e,t){var n=null==e?0:e.length,r=rn(e,t);return an(e,nt(t,(function(e){return dt(e,n)?+e:e})).sort(ln)),r},wn(mn(On,void 0,fn),On+"");var On;var Cn=function(e,t){return wn(mn(e,t,gn),e+"")};var An=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var Sn=function(e){return e!=e};var xn=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var In=function(e,t,n){return t==t?xn(e,t,n):An(e,Sn,n)};var Tn=function(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1},Fn=Array.prototype.splice;var Mn=function(e,t,n,r){var i=r?Tn:In,o=-1,a=t.length,l=e;for(e===t&&(t=wt(t)),n&&(l=nt(e,Wt(n)));++o<a;)for(var s=0,u=t[o],c=n?n(u):u;(s=i(l,c,s,r))>-1;)l!==e&&Fn.call(l,s,1),Fn.call(e,s,1);return e};var Nn=Cn((function(e,t){return e&&e.length&&t&&t.length?Mn(e,t):e})),Dn=O("informed:ObjMap\t"),jn=function(e){var t=Ot(e);return Number.isInteger(+t[t.length-1])},Pn=function(){function e(){l(this,e)}return u(e,null,[{key:"empty",value:function(e){return 0===nn(e).length}},{key:"get",value:function(e,t){var n=Ct(e,t);return Dn("GOT",t,n),n}},{key:"has",value:function(e,t){return kt(e,t)}},{key:"set",value:function(t,n,r){if(void 0!==r)Dn("SETTING",n,r),mt(t,n,r);else if(jn(n)&&void 0!==e.get(t,n)){Dn("Special case SETTING",n,"to undefined"),mt(t,n,void 0);var i=Ot(n);kn(t,i=i.slice(0,i.length-1),!1)}else jn(n)||void 0===e.get(t,n)||(Dn("Special case REMOVING",n,"from object completley"),e.delete(t,n))}},{key:"delete",value:function(e,t){Dn("DELETE",t),_t(e,t);var n=Ot(t);kn(e,n=n.slice(0,n.length-1))}}]),e}();function kn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0!==t.length){var r=Ct(e,t);Array.isArray(r)&&n&&Nn(r,void 0),(Array.isArray(r)?r.every((function(e){return null==e})):"{}"===JSON.stringify(r))&&_t(e,t),kn(e,t.slice(0,t.length-1))}}var Rn=O("informed:Controller\t"),Ln=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(this,t),(e=b(this,p(t).call(this))).options=n,e.fields=new Map,e.registered={},e.expectedRemovals={},e.state={values:{},touched:{},errors:{},pristine:!0,dirty:!1,invalid:!1,submits:0},e.deregister=e.deregister.bind(g(e)),e.register=e.register.bind(g(e)),e.setValue=e.setValue.bind(g(e)),e.setTouched=e.setTouched.bind(g(e)),e.setError=e.setError.bind(g(e)),e.setFormError=e.setFormError.bind(g(e)),e.submitForm=e.submitForm.bind(g(e)),e.reset=e.reset.bind(g(e)),e.update=e.update.bind(g(e)),e.validate=e.validate.bind(g(e)),e.keyDown=e.keyDown.bind(g(e)),e.getField=e.getField.bind(g(e)),e.expectRemoval=e.expectRemoval.bind(g(e)),e.updater={register:e.register,deregister:e.deregister,setValue:e.setValue,setTouched:e.setTouched,setError:e.setError,update:e.update,getField:e.getField,expectRemoval:e.expectRemoval},e}return h(t,e),u(t,[{key:"setOptions",value:function(e){this.options=e}},{key:"getFormState",value:function(){return f({},this.state,{pristine:this.pristine(),dirty:this.dirty(),invalid:this.invalid()})}},{key:"getFormApi",value:function(){var e=this;return{setValue:function(t,n,r){return e.fields.get(t).fieldApi.setValue(n,null,f({allowEmptyString:e.options.allowEmptyStrings},r))},setTouched:function(t,n){return e.fields.get(t).fieldApi.setTouched(n)},setError:function(t,n){return e.fields.get(t).fieldApi.setError(n)},setValues:function(t){return e.setValues(t)},setInitialValue:function(t,n){return e.setInitialValue(t,n)},getValue:function(t){return e.getValue(t)},getTouched:function(t){return e.getTouched(t)},getError:function(t){return e.getError(t)},reset:function(){return e.reset()},submitForm:function(t){return e.submitForm(t)},getState:function(){return e.getFormState()},getValues:function(){return e.getFormState().values},getFullField:function(t){return e.getFullField(t)},fieldExists:function(t){return null!=e.fields.get(t)},getInitialValue:function(t){return e.getInitialValue(t)},setFormError:function(t){return e.setFormError(t)},validate:function(){return e.validate()},validateField:function(t){return e.fields.get(t).fieldApi.validate()},resetField:function(t){return e.fields.get(t).fieldApi.reset()},emitter:this,setFieldError:function(t,n){return e.setError(t,n)},getOptions:function(){return e.options}}}},{key:"setValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Rn("Setting ".concat(e," to ").concat(t)),Pn.set(this.state.values,e,t),delete this.state.error,this.emit("change"),this.emit("value",e,t),n&&this.notify(e)}},{key:"setTouched",value:function(e,t){Pn.set(this.state.touched,e,t),this.emit("change")}},{key:"setError",value:function(e,t){if(Rn("Setting ".concat(e,"'s error to ").concat(t)),/\[[0-9]*\]$/.test(e)){var n=e.slice(0,e.lastIndexOf("[")),r=Pn.get(this.state.errors,n);if(Rn("Array field ".concat(n,"'s error is ").concat(r)),r&&!Array.isArray(r))return void Rn("Never set ".concat(e,"'s error to ").concat(t," becuase there is already array level validation with error ").concat(r))}Pn.set(this.state.errors,e,t),this.emit("change")}},{key:"setFormError",value:function(e){this.state.error=e,this.emit("change")}},{key:"setInitialValue",value:function(e,t){Pn.set(this.options.initialValues,e,t)}},{key:"notify",value:function(e){var t=this,n=this.fields.get(e);n.notify&&n.notify.forEach((function(e){var n=t.fields.get(e);if(n){Rn("Notifying",n.field);var r=t.getValue(n.field);n.fieldApi.validate(r)}}))}},{key:"getValue",value:function(e){return Rn("Getting value for",e,Pn.get(this.state.values,e)),Pn.get(this.state.values,e)}},{key:"getTouched",value:function(e){return Pn.get(this.state.touched,e)}},{key:"getError",value:function(e){return Pn.get(this.state.errors,e)}},{key:"getFullField",value:function(e){return e}},{key:"valid",value:function(){return!(!Pn.empty(this.state.errors)||this.state.error)}},{key:"invalid",value:function(){return!(Pn.empty(this.state.errors)&&!this.state.error)}},{key:"pristine",value:function(){return Pn.empty(this.state.touched)&&Pn.empty(this.state.values)}},{key:"dirty",value:function(){return!this.pristine()}},{key:"getInitialValue",value:function(e){return Pn.get(this.options.initialValues,e)}},{key:"reset",value:function(){var e=this;Rn("Resetting"),this.fields.forEach((function(t){t.fieldApi.reset();var n=Pn.get(e.options.initialValues,t.field);void 0!==n&&e.getFormApi().setValue(t.field,n,{initial:!0})})),this.emit("change")}},{key:"setValues",value:function(e){var t=this;Rn("Setting values"),this.fields.forEach((function(n){var r=Pn.get(e,n.field);void 0!==r&&t.getFormApi().setValue(n.field,r)})),this.emit("change")}},{key:"validate",value:function(){var e=this;if(Rn("Validating all fields"),this.fields.forEach((function(t,n){var r=e.getValue(n);t.fieldApi.validate(r),t.fieldApi.setTouched(!0)})),this.options.validate){var t=this.options.validate(this.state.values);this.setFormError(t)}if(this.options.validateFields){var n=this.options.validateFields(this.state.values);this.fields.forEach((function(t){if(Pn.has(n,t.field)){var r=Pn.get(n,t.field);e.getFormApi().setError(t.field,r)}}))}}},{key:"keyDown",value:function(e){if(13==e.keyCode&&this.options.preventEnter)return e.preventDefault(e),!1}},{key:"submitForm",value:function(e){this.state.submits=this.state.submits+1,!this.options.dontPreventDefault&&e&&e.preventDefault(e),this.validate(),this.emit("change"),this.valid()?(Rn("Submit",this.state),this.emit("submit")):(Rn("Submit",this.state),this.emit("failure"))}},{key:"register",value:function(e,t,n){Rn("Register",e,t);var r=this.registered[e];this.registered[e]=!0,this.fields.set(e,n);var i=e.slice(0,e.lastIndexOf("]")+1||e.length);if(delete this.expectedRemovals[i],!n.shadow){if(n.keepState){var o=Pn.get(this.state.values,e),a=Pn.get(this.options.initialValues,e);void 0!==o?this.getFormApi().setValue(e,o||t.value):void 0!==a?this.getFormApi().setValue(e,a):this.setValue(e,t.value,!1);var l=Pn.get(this.state.touched,e);this.getFormApi().setTouched(e,l)}else{var s=Pn.get(this.options.initialValues,e);void 0===s||r?this.setValue(e,t.value,!1):this.getFormApi().setValue(e,s,{initial:!0}),this.setTouched(e,t.touched)}this.setError(e,t.error)}}},{key:"deregister",value:function(e,t){Rn("Deregister",e);var n=this.fields.get(e),r=e.slice(0,e.lastIndexOf("]")+1||e.length);n.keepState&&!this.expectedRemovals[r]||(Pn.delete(this.state.values,e),Pn.delete(this.state.touched,e),Pn.delete(this.state.errors,e)),this.fields.delete(e),this.emit("change"),this.emit("value",e)}},{key:"expectRemoval",value:function(e){Rn("Expecting removal of",e),this.expectedRemovals[e]=!0}},{key:"update",value:function(e,t){Rn("Update",e),this.fields.set(e,t)}},{key:"getField",value:function(e){return Rn("Getting Field",e),this.fields.get(e)}}]),t}(a.EventEmitter),Bn=o.a.createContext({register:function(){},deregister:function(){},setValue:function(){},setTouched:function(){},setError:function(){},update:function(){},getField:function(){},expectRemoval:function(){}}),Vn=o.a.createContext({}),qn=o.a.createContext({getFullField:function(){},getValues:function(){},getOptions:function(){return{}},setInitialValue:function(){},getInitialValue:function(){}}),Gn=o.a.createContext(),Wn=(o.a.createContext(),O("informed:FormProvider\t\t")),$n=function(e){var t=e.children,n=e.formApi,r=e.formController,i=e.formState,a=v(e,["children","formApi","formController","formState"]);if(Wn("Render FormProvider"),n)return Wn("Render FormProvider with given values"),o.a.createElement(Bn.Provider,{value:r.updater},o.a.createElement(qn.Provider,{value:n},o.a.createElement(Vn.Provider,{value:i},t)));Wn("Render FormProvider with generated values");var l=Yn(a);return o.a.createElement(Bn.Provider,{value:l.formController.updater},o.a.createElement(qn.Provider,{value:l.formApi},o.a.createElement(Vn.Provider,{value:l.formState},t)))},Hn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,Un=O("informed:useForm\t\t"),Yn=function(e){var t=e.dontPreventDefault,n=e.initialValues,r=e.validate,a=e.validateFields,l=e.allowEmptyStrings,s=e.preventEnter,u=e.getApi,c=e.onChange,d=e.onSubmit,f=e.onValueChange,h=e.onSubmitFailure,p=v(e,["dontPreventDefault","initialValues","validate","validateFields","allowEmptyStrings","preventEnter","getApi","onChange","onSubmit","onValueChange","onSubmitFailure"]);Un("Render useForm");var m=Object(i.useMemo)((function(){return{dontPreventDefault:t,initialValues:n,validate:r,validateFields:a,allowEmptyStrings:l,preventEnter:s}}),[t,n,r,a,l,s]),g=y(Object(i.useState)((function(){return new Ln(m)})),1)[0];Object(i.useEffect)((function(){g.setOptions(m)}),[m]);var b=y(Object(i.useState)((function(){return g.getFormState()})),2),E=b[0],_=b[1];Hn((function(){var e=function(){return c&&c(g.getFormState())},t=function(){return d&&d(g.getFormState().values)},n=function(){return f&&f(g.getFormState().values)},r=function(){return h&&h(g.getFormState().errors)};return g.on("change",e),g.on("submit",t),g.on("value",n),g.on("failure",r),function(){g.removeListener("change",e),g.removeListener("submit",t),g.removeListener("value",n),g.removeListener("failure",r)}}),[c,d,f,h]),Object(i.useState)((function(){g.on("change",(function(){return _(g.getFormState())})),u&&u(g.getFormApi())}));var w=y(Object(i.useState)((function(){return g.getFormApi()})),1)[0];return{formApi:w,formState:E,formController:g,render:function(e){return o.a.createElement($n,{formApi:w,formState:E,formController:g},e)},userProps:p}},Qn=O("informed:Form\t\t"),Xn=function(e){var t=e.children,n=e.render,r=e.component,i=v(e,["children","render","component"]);Qn("Render FORM");var a,l=Yn(i),s=l.formApi,u=l.formController,c=l.formState,f=l.render,h=l.userProps;return f(o.a.createElement("form",d({},h,{onReset:u.reset,onSubmit:u.submitForm,onKeyDown:u.keyDown}),(a={formState:c,formApi:s},r?o.a.createElement(r,a,t):n?n(a):"function"==typeof t?t(a):t)))};function zn(){return Object(i.useContext)(qn)}function Kn(){return Object(i.useContext)(Vn)}var Jn=function(e){var t=e.scope,n=e.children,r=Object(i.useContext)(Bn),a=zn(),l=Kn(),s=Object(i.useMemo)((function(){return function(e,t){return f({},t,{getValue:function(n){return t.getValue("".concat(e,".").concat(n))},getTouched:function(n){return t.getTouched("".concat(e,".").concat(n))},getError:function(n){return t.getError("".concat(e,".").concat(n))},setValue:function(n,r){return t.setValue("".concat(e,".").concat(n),r)},setTouched:function(n,r){return t.setTouched("".concat(e,".").concat(n),r)},setError:function(n,r){return t.setError("".concat(e,".").concat(n),r)},getFullField:function(n){return"".concat(t.getFullField(e),".").concat(n)}})}(t,a)}),[t]),u=Object(i.useMemo)((function(){return function(e,t){var n=t.register,r=t.deregister,i=t.setValue,o=t.setTouched,a=t.setError,l=t.update,s=t.getField,u=t.expectRemoval;return{register:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return n.apply(void 0,["".concat(e,".").concat(t)].concat(i))},deregister:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r.apply(void 0,["".concat(e,".").concat(t)].concat(i))},update:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return l.apply(void 0,["".concat(e,".").concat(t)].concat(r))},setValue:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i.apply(void 0,["".concat(e,".").concat(t)].concat(r))},setTouched:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.apply(void 0,["".concat(e,".").concat(t)].concat(r))},setError:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return a.apply(void 0,["".concat(e,".").concat(t)].concat(r))},getField:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return s.apply(void 0,["".concat(e,".").concat(t)].concat(r))},expectRemoval:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u.apply(void 0,["".concat(e,".").concat(t)].concat(r))}}}(t,r)}),[t]);return o.a.createElement(Bn.Provider,{value:u},o.a.createElement(qn.Provider,{value:s},o.a.createElement(Vn.Provider,{value:l},n)))};function Zn(e){var t=Object(i.useRef)(),n=y(Object(i.useState)(e),2),r=n[0],o=n[1];t.current=r;return[r,function(e){t.current=e,o(e)},function(){return t.current}]}var er=O("informed:useField\t"),tr=function(e,t){if(null!=e)return t?t(e):e},nr=function(e,t,n){return t&&n?t(e):e};function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.field,r=e.validate,a=e.mask,l=e.maskWithCursorOffset,s=e.format,u=e.parse,c=e.initialValue,d=e.validateOnChange,f=e.validateOnBlur,h=e.validateOnMount,p=e.maskOnBlur,m=e.allowEmptyString,g=e.onValueChange,b=e.notify,_=e.keepState,w=e.maintainCursor,O=e.debug,C=e.shadow,A=v(e,["field","validate","mask","maskWithCursorOffset","format","parse","initialValue","validateOnChange","validateOnBlur","validateOnMount","maskOnBlur","allowEmptyString","onValueChange","notify","keepState","maintainCursor","debug","shadow"]),S=Object(i.useContext)(Bn),x=zn(),I=y(Zn(tr(c,a)),3),T=I[0],F=I[1],M=I[2],N=y(Zn(h?r(T):void 0),3),D=N[0],j=N[1],P=N[2],k=y(Zn(),3),R=k[0],L=k[1],B=k[2],V=y(Zn(0),3),q=(V[0],V[1]),G=V[2],W=y(Zn(0),3),$=(W[0],W[1]),H=W[2],U=y(Object(i.useState)(nr(T,s,u)),2),Y=U[0],Q=U[1],X=Object(i.useRef)(c);X.current=c;var z=function(e){er("Setting ".concat(n,"'s error to ").concat(e)),j(e),S.setError(n,e)},K=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=x.getOptions();er("Setting ".concat(n," to ").concat(t));var f=t;if(""!==t||m||o.allowEmptyString||c.allowEmptyStrings||(t=void 0),"number"===e.type&&void 0!==t&&(t=+t),a&&!p&&(f=a(t),t=a(t)),l&&!p){var h=l(t);f=h.value,t=h.value,$(h.offset)}s&&u&&(t=u(t),f=s(t)),r&&d&&!o.initial&&(er("Validating after change ".concat(n," ").concat(t)),z(r(t,x.getValues()))),i&&i.target&&i.target.selectionStart&&q(i.target.selectionStart),F(t),Q(f),g&&g(t),S.setValue(n,t)},J=function(e,t){if(r&&f&&!t&&e&&(er("Validating after blur ".concat(n," ").concat(M())),z(r(M(),x.getValues()))),a&&p){var i=a(M());F(i),Q(i),g&&g(i),S.setValue(n,i)}if(l&&p){var o=l(M());$(o.offset),F(o.value),Q(o.value),g&&g(o.value),S.setValue(n,o.value)}L(e),S.setTouched(n,e)},Z={setValue:K,setTouched:J,setError:z,reset:function(){var e=tr(X.current,a);K(X.current),z(h?r(e):void 0),J(void 0,!0)},validate:function(e){r&&(er("Field validating ".concat(n," ").concat(M()||e)),z(r(M()||e,x.getValues())))},getValue:M,getTouched:B,getError:P},ee={value:T,error:D,touched:R,maskedValue:Y};C&&(ee={error:D,touched:R}),Object(i.useState)((function(){var e=x.getFullField(n);er("Initial Register",e),S.register(n,ee,{field:e,fieldApi:Z,fieldState:ee,notify:b,keepState:_,shadow:C})})),er("Render",x.getFullField(n),ee);var te=Object(i.useRef)(null),ne=o.a.useMemo((function(){return t||te}),[]);Object(i.useEffect)((function(){var e=x.getFullField(n);return er("Register",e),S.register(n,ee,{field:e,fieldApi:Z,fieldState:ee,notify:b,keepState:_,shadow:C}),function(){er("Deregister",e),S.deregister(n)}}),[n]),Object(i.useEffect)((function(){var e=x.getFullField(n);er("Update",n),S.update(n,{field:e,fieldApi:Z,fieldState:ee,notify:b,keepState:_,shadow:C})}),[r,d,f,g]),Hn((function(){w&&null!=ne.current&&G()&&(ne.current.selectionEnd=G()+H())}),[T]),Hn((function(){O&&ne&&(ne.current.style.border="5px solid orange",setTimeout((function(){ne.current.style.borderWidth="2px",ne.current.style.borderStyle="inset",ne.current.style.borderColor="initial",ne.current.style.borderImage="initial"}),500))}));var re=[].concat(E(Object.values(ee)),E(Object.values(e)),E(Object.values(A)));return{fieldState:ee,fieldApi:Z,render:function(e){return Object(i.useMemo)((function(){return e}),E(re))},ref:ne,userProps:A}}var ir=O("informed:useArrayField\t"),or=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},ar=function(e){var t=e.field,n=e.initialValue,r=e.validate,o=v(e,["field","initialValue","validate"]),a=zn(),l=Object(i.useContext)(Bn),s=a.getFullField(t),u=a.getInitialValue(s)||n||[],c=a.getValue(s),d=y(Object(i.useState)(c||u),2),h=d[0],p=d[1],m=y(Zn(h?h.map((function(){return or()})):[]),3),g=m[0],b=m[1],_=m[2],w=Object(i.useMemo)((function(){return function(e,t){var n=null==_()?0:_().length;return r?r(e,n,t):void 0}})),O=rr(f({field:t,validate:w,shadow:!0},o)).fieldApi;Hn((function(){var e=function(e){if(e!==s&&(ir("".concat(s," changed")),RegExp("".concat(s,"\\[[0-9]+\\]")).test(e))){var n=a.getValue(t);ir("setting array field ".concat(s," to ").concat(n)),O.setValue(n)}};return a.emitter.on("value",e),function(){a.emitter.removeListener("value",e)}}),[t]);return{fields:g.map((function(e,n){return{key:e,field:"".concat(t,"[").concat(n,"]"),remove:function(){return function(e){l.expectRemoval("".concat(t,"[").concat(e,"]"));var n=g.slice(0,e).concat(g.slice(e+1,g.length));b(n);var r=h.slice(0,e).concat(h.slice(e+1,h.length));p(r),a.setInitialValue(t,r)}(n)},initialValue:h&&h[n]}})),add:function(){g.push(or()),b(E(g))},addWithInitialValue:function(e){g.push(or()),b(E(g));var t=E(h);t[g.length-1]=e,p(t)}}},lr=function(e){var t=e.children,n=v(e,["children"]);return t(ar(n))},sr=function(e){return o.a.forwardRef((function(t,n){return o.a.createElement(qn.Consumer,null,(function(r){return o.a.createElement(e,d({formApi:r,ref:n},t))}))}))},ur=function(e){return o.a.forwardRef((function(t,n){return o.a.createElement(Vn.Consumer,null,(function(r){return o.a.createElement(e,d({formState:r,ref:n},t))}))}))},cr=function(e,t){return{getValue:function(){return e.getValue(t)},setValue:function(n){return e.setValue(t,n)},getTouched:function(){return e.getTouched(t)},setTouched:function(n){return e.setTouched(t,n)},getError:function(){return e.getError(t)},setError:function(n){return e.setError(t,n)},reset:function(){return e.resetField(t)},validate:function(){return e.validateField(t)},exists:function(){return e.fieldExists(t)}}};function dr(e){var t=zn();return Object(i.useMemo)((function(){return cr(t,e)}),[e])}var fr=function(e){return{value:e.getValue(),touched:e.getTouched(),error:e.getError()}};function hr(e){var t=dr(e);Kn();return fr(t)}var pr=function(e){return function(t){return function(n){var r=hr(e);return o.a.createElement(t,d({fieldState:r},n))}}},mr=function(e){return function(t){return function(n){var r=dr(e);return o.a.createElement(t,d({fieldApi:r},n))}}},vr=function(e){return o.a.forwardRef((function(t,n){return o.a.createElement(Gn.Consumer,null,(function(r){var i=r.radioGroupApi,a=r.radioGroupState;return o.a.createElement(e,d({radioGroupApi:i,radioGroupState:a,ref:n},t))}))}))},gr=function(e){var t,n=o.a.forwardRef((function(t,n){var r=rr(t,n),i=r.fieldState,a=r.fieldApi,l=r.render,s=r.ref,u=r.userProps;return l(o.a.createElement(e,d({fieldApi:a,fieldState:i,field:t.field,forwardedRef:s,debug:t.debug,type:t.type},u)))}));return n.displayName="asField(".concat((t=e).type&&t.type.name?t.type.name:t.displayName||t.name||"Component",")"),n},br=O("informed:Text\t"),yr=function(e){var t=e.fieldApi,n=e.fieldState,r=v(e,["fieldApi","fieldState"]),i=n.maskedValue,a=t.setValue,l=t.setTouched,s=r.onChange,u=r.onBlur,c=r.field,f=(r.initialValue,r.forwardedRef),h=r.debug,p=v(r,["onChange","onBlur","field","initialValue","forwardedRef","debug"]);return br("Render",c),Hn((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),o.a.createElement("input",d({},p,{name:c,ref:f,value:i||0===i?i:"",onChange:function(e){a(e.target.value,e),s&&s(e)},onBlur:function(e){l(!0),u&&u(e)}}))},Er=gr(yr),_r=function(e){var t=e.radioGroupApi,n=e.radioGroupState,r=v(e,["radioGroupApi","radioGroupState"]),i=n.value,a=t.setValue,l=t.setTouched,s=t.onChange,u=t.onBlur,c=r.value,f=r.onChange,h=r.onBlur,p=r.field,m=(r.initialValue,r.forwardedRef),g=v(r,["value","onChange","onBlur","field","initialValue","forwardedRef"]);return o.a.createElement("input",d({},g,{name:p,ref:m,value:c,checked:i===c,onChange:function(e){e.target.checked&&(a(c),f&&f(e),s&&s(e))},onBlur:function(e){l(!0),h&&h(e),u&&u(e)},type:"radio"}))},wr=vr(_r),Or=function(e){var t=e.fieldApi,n=e.fieldState,r=v(e,["fieldApi","fieldState"]),i=n.maskedValue,a=t.setValue,l=t.setTouched,s=r.onChange,u=r.onBlur,c=r.field,f=(r.initialValue,r.forwardedRef),h=r.debug,p=v(r,["onChange","onBlur","field","initialValue","forwardedRef","debug"]);return Hn((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),o.a.createElement("textarea",d({},p,{name:c,ref:f,value:i||"",onChange:function(e){a(e.target.value,e),s&&s(e)},onBlur:function(e){l(!0),u&&u(e)}}))},Cr=gr(Or),Ar=O("informed:Select\t"),Sr=function(e){var t=e.fieldApi,n=e.fieldState,r=v(e,["fieldApi","fieldState"]),a=n.value,l=t.setTouched,s=r.onChange,u=r.onBlur,c=r.field,f=(r.initialValue,r.children),h=r.forwardedRef,p=r.debug,m=r.multiple,g=v(r,["onChange","onBlur","field","initialValue","children","forwardedRef","debug","multiple"]),b=Object(i.useRef)();return Hn((function(){p&&h&&(h.current.style.background="red",setTimeout((function(){h.current.style.background="white"}),500))})),Ar("Render",c,a),o.a.createElement("select",d({},g,{multiple:m,name:c,ref:h||b,value:a||(m?[]:""),onChange:function(e){var n=Array.from((h||b).current).filter((function(e){return e.selected})).map((function(e){return e.value}));t.setValue(m?n:n[0]||""),s&&e&&s(e)},onBlur:function(e){l(!0),u&&u(e)}}),f)},xr=gr(Sr),Ir=function(e){var t=e.value,n=e.forwardedRef,r=e.children,i=v(e,["value","forwardedRef","children"]);return o.a.createElement("option",d({ref:n,value:t,key:t},i),r)},Tr=function(e){var t=e.fieldApi,n=e.fieldState,r=v(e,["fieldApi","fieldState"]),i=n.value,a=t.setValue,l=t.setTouched,s=r.onChange,u=r.onBlur,c=r.field,f=(r.initialValue,r.debug,r.forwardedRef),h=v(r,["onChange","onBlur","field","initialValue","debug","forwardedRef"]);return o.a.createElement("input",d({},h,{name:c,ref:f,checked:!!i,onChange:function(e){a(e.target.checked),s&&s(e)},onBlur:function(e){l(!0),u&&u(e)},type:"checkbox"}))},Fr=gr(Tr),Mr=function(e){function t(){return l(this,t),b(this,p(t).apply(this,arguments))}return h(t,e),u(t,[{key:"render",value:function(){return o.a.createElement(Gn.Provider,{value:this.groupContext},this.props.children)}},{key:"groupContext",get:function(){return{radioGroupApi:f({},this.props.fieldApi,{onChange:this.props.onChange,onBlur:this.props.onBlur}),radioGroupState:this.props.fieldState}}}]),t}(i.Component),Nr=gr(Mr)}.call(this,n(18),n(19))},function(e,t){e.exports=n},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(3));class a extends i.Component{constructor(){super(...arguments),this.initialAnswerFactory=new o.InitialAnswerFactory(this.props.item)}submitForm(){this.formApi&&this.formApi.submitForm()}getFormApi(e){this.formApi=e}handleSubmit(e){const{item:t}=this.props;t.setSingleInitialAnswer(this.initialAnswerFactory.createInitialAnswer({value:e.value}))}componentDidUpdate(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;this.formApi&&this.formApi.setValue("value",t)}}t.QuestionItem=a,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HumanReadableGuid=function(){let e;const t=()=>{let e=1;const t=new Map;return{getHumanReadableId:n=>(n=>(t.has(n)||t.set(n,e++),((e,t)=>{if(void 0===e)return;let n=""+e;for(;n.length<t;)n="0"+n;return n})(t.get(n),3)||""))(n),updateKey(e,n){((e,n)=>{if(!t.has(e))return;const r=t.get(e);t.set(n,r),t.delete(e)})(e,n)}}};return{getHumanReadableGuid:()=>(e||(e=t()),e)}}(),t.default=t.HumanReadableGuid},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.rightPanel="RIGHT_PANEL",e.insideItem="INSIDE_ITEM"}(r=t.SETTINGS_DISPLAY_MODE||(t.SETTINGS_DISPLAY_MODE={})),t.default=r},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(3));class a extends i.Component{constructor(){super(...arguments),this.itemFactory=new o.ItemFactory(this.props.item)}addItem(){const{item:e,selectTargetItem:t}=this.props,n=this.itemFactory.createItem();e.addItem(n),t&&t(n)}addGroupItem(){const{item:e,selectTargetItem:t}=this.props,n=this.itemFactory.createGroupItem();e.addItem(n),t&&t(n)}addChoiceItem(){const{item:e,selectTargetItem:t}=this.props,n=this.itemFactory.createChoiceItem(),r=new o.AnswerOptionFactory(n);n.addAnswerOption(r.createAnswerOption({value:"Option 1"})),e.addItem(n),t&&t(n)}render(){return i.createElement("div",{className:"item-collection-menu btn-group"},i.createElement("button",{className:"btn btn-secondary",title:"Add text",onClick:this.addItem.bind(this)},i.createElement("i",{className:"fas fa-font"})),i.createElement("button",{className:"btn btn-secondary",title:"Add group",onClick:this.addGroupItem.bind(this)},i.createElement("i",{className:"fas fa-layer-group"})),i.createElement("button",{className:"btn btn-secondary",title:"Add question",onClick:this.addChoiceItem.bind(this)},i.createElement("i",{className:"fas fa-plus"})))}}t.ItemCollectionMenu=a,t.default=a},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=i(n(20)),l=i(n(10));class s extends o.Component{componentDidMount(){const{subscribe:e}=this.props;e&&e()}render(){const{itemList:e,className:t="",nestingLevel:n,subscribe:r,isItemActive:i}=this.props;return o.createElement("div",{className:`questionnaire-item-list ${t}`,"data-nesting-level":n},e.map((e,t)=>o.createElement(l.default.Consumer,{key:e.id},l=>o.createElement(a.default,Object.assign({item:e,nestingLevel:`${n}:${t}`,subscribe:r,isItemActive:i},l)))))}}t.QuestionnaireItemList=s,t.default=s},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(1);class a extends i.Component{constructor(){super(...arguments),this.RadioRef=i.createRef()}onBlur(e){const{option:t}=this.props;t.setValue(e.target.value)}remove(){const{option:e}=this.props;e.remove()}onChange(e){const{option:t}=this.props;e.target.checked?t.selectAsDefault():t.unselectAsDefault()}onClick(e){const{option:t}=this.props;e.target.checked&&t.selectAsDefault()}render(){const{option:e}=this.props;return i.createElement("div",{className:"form-group"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("div",{className:"input-group-text"},i.createElement("label",{htmlFor:`${e.id}-initial`,className:"mr-1 mb-0"},"By default"),i.createElement("input",{checked:e.defaultSelected,id:`${e.id}-initial`,type:"radio",onChange:this.onChange.bind(this),onClick:this.onClick.bind(this)}))),i.createElement("input",{autoComplete:"off",id:`${e.id}-option`,className:"form-control",defaultValue:e.value,onBlur:this.onBlur.bind(this)}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-outline-secondary",onClick:this.remove.bind(this)},i.createElement("i",{className:"fas fa-trash"})))))}}t.ChoiceOption=a,t.default=o.useObservableModel(a)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=i(n(6));t.QuestionnaireContext=o.createContext({settingsDisplayMode:a.default.rightPanel}),t.default=t.QuestionnaireContext},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var s=10;function u(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,l=s,console&&console.warn&&console.warn(l)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)o(s,this,t);else{var u=s.length,c=m(s,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return c(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return c(this,e,t,!0)},l.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return h(this,e,!0)},l.prototype.rawListeners=function(e){return h(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},l.prototype.listenerCount=p,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(13))},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3));n(14);const l=n(2),s=n(1),u=i(n(7)),c=i(n(8)),d=i(n(48)),f=i(n(10)),h=n(6);class p extends o.Component{constructor(){super(...arguments),this.state={settingsDisplayModel:h.SETTINGS_DISPLAY_MODE.insideItem,targetItem:void 0,targetGroup:this.props.questionnaireModel},this.questionnaireItemListRef=o.createRef(),this.itemFactory=new a.ItemFactory(this.props.questionnaireModel),this.nestingLevel="0",this.itemListsMap=new Map,this.sortableOptions={group:"nested",animation:550,fallbackOnBody:!0,swapThreshold:.35,handle:".drag-handle",dragClass:"sortable-drag",onChoose:this.onDragChoose.bind(this),onUnchoose:this.onDragUnchoose.bind(this),onEnd:this.onDragEnd.bind(this),forceFallback:!0,filter:".no-drag",fallbackTolerance:1,emptyInsertThreshold:30},this.bodyListener=e=>{this.questionnaireItemListRef.current&&this.questionnaireItemListRef.current.contains(e.target)||this.clearTargetItem()}}handleSubmit(e){const{questionnaireModel:t}=this.props;t.updateQuestionnaire({...t,title:e.title,description:e.description})}submitForm(){this.formApi&&this.formApi.submitForm()}getFormApi(e){this.formApi=e}escListener(e){27===e.keyCode&&this.clearTargetItem()}componentDidMount(){this.makeItemsDraggable(),document.addEventListener("keydown",this.escListener.bind(this)),document.body.addEventListener("mousedown",this.bodyListener),this.clearTargetItem()}componentDidUpdate(){const{questionnaireModel:e}=this.props;this.formApi.setValues(e)}componentWillUnmount(){this.clearSortables(),document.removeEventListener("keydown",this.escListener.bind(this)),document.body.removeEventListener("mousedown",this.bodyListener)}clearSortables(){this.itemListsMap.forEach(e=>e.destroy())}makeItemsDraggable(){document.querySelectorAll("#drag-drop-nested .questionnaire-item-list").forEach(e=>{this.itemListsMap.has(e)||this.itemListsMap.set(e,new d.default(e,this.sortableOptions))})}onDragChoose(e){document.body.style.height=`${document.body.clientHeight}px`}fillQuestionList(e,t){t.items&&t.items.forEach(t=>{t.type===a.GROUP&&this.fillQuestionList(e,t),e.push(t)})}prepareQuestionList(){const{questionnaireModel:e}=this.props,t=[];return this.fillQuestionList(t,e),t}onDragUnchoose(e){document.body.style.height="";const t=this.prepareQuestionList().find(t=>t.id===e.item.dataset.id);this.selectTargetItem(t)}onDragEnd(e){const t=this.findNestedItemList(e.from.dataset.nestingLevel),n=this.findNestedItemList(e.to.dataset.nestingLevel);if(t===n&&e.oldIndex===e.newIndex||void 0===t||void 0===n)return;const r=t.items.find(t=>t.id===e.item.dataset.id);r&&(t!==n&&e.from.appendChild(e.item),r.remove(),n.addItem(r,e.newIndex))}findNestedItemList(e){if(void 0===e)return;const t=e.split(":");t.shift();const{questionnaireModel:n}=this.props;let r=n;return 0===e.length?r:(t.forEach(e=>{Array.isArray(r.items)&&(r=r.items[+e])}),r)}selectTargetItem(e){this.setState({targetItem:e,targetGroup:e.type===a.GROUP?e:e.parent})}clearTargetItem(){const{questionnaireModel:e}=this.props;this.setState({targetItem:void 0,targetGroup:e})}renderItemList(){const{questionnaireModel:e}=this.props,{targetItem:t,settingsDisplayModel:n,targetGroup:r}=this.state;return o.createElement("div",{id:"drag-drop-nested"},o.createElement(f.default.Provider,{value:{questionnaire:e,selectTargetItem:this.selectTargetItem.bind(this),targetItemId:t&&t.id,settingsDisplayMode:n,clearTargetItem:this.clearTargetItem.bind(this),targetGroupId:r&&r.id}},o.createElement(c.default,{itemList:e.items,nestingLevel:this.nestingLevel,subscribe:this.makeItemsDraggable.bind(this)})))}render(){const{questionnaireModel:e,className:t}=this.props;return o.createElement("div",{className:`questionnaire-designer media ${t}`},o.createElement("div",{className:"questionnaire-items media-body"},o.createElement("div",{className:"questionnaire card mb-3"},o.createElement("div",{className:"card-header d-flex justify-content-end"}),o.createElement("div",{className:"card-body"},o.createElement(l.Form,{getApi:this.getFormApi.bind(this),key:e.id,initialValues:e,onSubmit:this.handleSubmit.bind(this)},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:`${e.id}-title`},"Questionnaire Title"),o.createElement(l.Text,{autoComplete:"off",className:"form-control",id:`${e.id}-title`,field:"title",placeholder:"My Questionnaire",autoFocus:!0,onBlur:this.submitForm.bind(this)})),o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:`${e.id}-description`},"Questionnaire Description"),o.createElement(l.TextArea,{autoComplete:"off",className:"form-control",id:`${e.id}-description`,field:"description",placeholder:"My description",onBlur:this.submitForm.bind(this)}))))),0===e.items.length&&o.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center"},o.createElement(u.default,{item:e,selectTargetItem:this.selectTargetItem.bind(this)})),o.createElement("div",{ref:this.questionnaireItemListRef},this.renderItemList())))}}t.Questionnaire=p,p.defaultProps={className:""};const m=s.useObservableModel(p);t.QuestionnaireDesigner=m,t.default=m},function(e,t,n){var r=n(15);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".questionnaire-item {\n  position: relative; }\n\n.bottom-line {\n  display: flex;\n  flex-wrap: wrap;\n  position: absolute;\n  right: -27px;\n  width: calc(100% + 27px);\n  height: 16px;\n  bottom: -8px;\n  padding-right: 1px; }\n  .bottom-line button.toggle {\n    padding: 2px !important;\n    border: 0 !important;\n    width: 32px !important;\n    height: 32px !important;\n    flex: 0 0 auto;\n    z-index: 100; }\n  .bottom-line hr {\n    flex-basis: 0;\n    flex-grow: 1;\n    max-width: 100%; }\n  .bottom-line .dropdown-menu {\n    padding: 0;\n    border: 0;\n    min-width: 0; }\n  .bottom-line .btn-group-vertical {\n    position: absolute; }\n\n.bottom-line:not(:hover) hr {\n  opacity: 0; }\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";var r,i={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function l(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}function s(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id],a=0;if(o){for(o.refs++;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(v(r.parts[a],t))}else{for(var l=[];a<r.parts.length;a++)l.push(v(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:l}}}}function u(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function v(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=u(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=u(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=l(e,t);return s(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o],u=i[a.id];u&&(u.refs--,r.push(u))}e&&s(l(e,t),t);for(var c=0;c<r.length;c++){var d=r[c];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete i[d.id]}}}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],c=!1,d=-1;function f(){c&&s&&(c=!1,s.length?u=s.concat(u):d=-1,u.length&&h())}function h(){if(!c){var e=l(f);c=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||l(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(1),s=i(n(21)),u=n(2),c=i(n(36)),d=i(n(38)),f=i(n(5)),h=n(46),p=i(n(6)),m=i(n(47));class v extends o.PureComponent{constructor(){super(...arguments),this.state={bottomMenuShowed:!1},this.bottomLineRef=o.createRef(),this.inputRef=o.createRef(),this.itemRef=o.createRef(),this.humanReadableGuid=f.default.getHumanReadableGuid()}submitForm(){this.formApi&&this.formApi.submitForm()}submitForm_2(){this.formApi_2&&this.formApi_2.submitForm()}getFormApi(e){this.formApi=e}getFormApi_2(e){this.formApi_2=e}handleSubmit(e){const{item:t}=this.props;t.updateItem({...t,text:e.text})}handleSubmit_2(e){const{item:t}=this.props;t.updateItem({...t,...e})}componentDidUpdate(){const{item:e,targetItemId:t}=this.props;e.id===t&&(this.formApi&&this.formApi.setValues(e),this.formApi_2&&this.formApi_2.setValues(e))}componentWillUnmount(){this.clearTargetItem(),clearTimeout(this.closingBottomMenuTimeOutKey)}componentDidMount(){const e=this.inputRef.current;if(e){const t=window.pageXOffset,n=window.pageYOffset;e.focus(),window.scrollTo(t,n)}}toggleBottomMenu(){this.setState({bottomMenuShowed:!this.state.bottomMenuShowed})}closeBottomMenu(){this.state.bottomMenuShowed&&this.setState({bottomMenuShowed:!1})}prepareClosingBottomMenu(){this.closingBottomMenuTimeOutKey=setTimeout(()=>{this.closeBottomMenu()})}preventClosingBottomMenu(){clearTimeout(this.closingBottomMenuTimeOutKey)}clearTargetItem(){const{clearTargetItem:e}=this.props;e&&e()}makeItemTarget(){const{selectTargetItem:e,item:t}=this.props;e&&e(t)}toggleTargetItem(){const{item:e,targetItemId:t}=this.props;e.id===t?this.clearTargetItem():this.makeItemTarget()}selectTargetItem(e){const{item:t,targetItemId:n}=this.props,r=t.id===n;e.stopPropagation(),("click"!==e.type||!r||this.itemRef.current&&!this.itemRef.current.contains(e.target))&&(this.bottomLineRef.current&&this.bottomLineRef.current.contains(e.target)||this.makeItemTarget())}getHeadlineControl(){const{item:e}=this.props;return e.type===a.DISPLAY?o.createElement(u.TextArea,{forwardedRef:this.inputRef,autoComplete:"off",className:"form-control",id:`${e.id}-text`,field:"text",placeholder:"Static text",onBlur:this.submitForm.bind(this)}):o.createElement(u.Text,{forwardedRef:this.inputRef,autoComplete:"off",className:"form-control",id:`${e.id}-text`,field:"text",placeholder:e.type===a.GROUP?"Questions group":"Question text",onBlur:this.submitForm.bind(this)})}getHeadlineFromClassName(){const{item:e}=this.props;switch(e.type){case a.GROUP:return"questionnaire-group-item__headline form-group";case a.DISPLAY:return"questionnaire-display-item__headline";default:return"questionnaire-item__headline form-group"}}getHeadlineLogoText(){const{item:e}=this.props;switch(e.type){case a.GROUP:return"Group Title";case a.DISPLAY:return"Text";default:return"Question"}}getClassNameIdentifier(){const{item:e}=this.props;return e.type===a.GROUP?"questionnaire-item questionnaire-group-item":e.type===a.DISPLAY?"questionnaire-item questionnaire-display-item":"questionnaire-item questionnaire-question-item"}renderHeadlineLabelReplacerText(){const{item:e}=this.props;switch(e.type){case a.GROUP:return"Questions group";case a.DISPLAY:return"Text";default:return"Question"}}renderHeader(){const{item:e,targetItemId:t}=this.props,n=e.id===t;return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-4 d-flex align-items-center"},o.createElement("button",{className:"btn btn-outline-secondary border-0 mr-2 no-drag",title:n?"collapse":"expand",onClick:this.toggleTargetItem.bind(this)},n?o.createElement("i",{className:"fas fa-angle-down"}):o.createElement("i",{className:"fas fa-angle-right"})),o.createElement("span",null,"#",this.humanReadableGuid.getHumanReadableId(e.id))),o.createElement("div",{className:"col-4 d-flex justify-content-center align-items-center"},o.createElement("i",{className:"fas fa-grip-horizontal text-muted"})),o.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"},o.createElement("div",{className:"btn-group no-drag"},t===e.id&&o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:e.remove.bind(e)},o.createElement("i",{className:"fas fa-trash"})))))}renderHeadline(){const{item:e,targetItemId:t,selectTargetItem:n}=this.props,r=e.id===t;return o.createElement("div",{className:`form-row ${this.getHeadlineFromClassName()}`},r?o.createElement("div",{className:"col"},o.createElement(u.Form,{getApi:this.getFormApi.bind(this),initialValues:e,onSubmit:this.handleSubmit.bind(this)},o.createElement("div",null,o.createElement("label",{htmlFor:`${e.id}-text`},this.getHeadlineLogoText()),this.getHeadlineControl()))):o.createElement("div",{className:"col"},o.createElement("label",{className:"labelReplacer"},e.text||this.renderHeadlineLabelReplacerText(),e.required&&o.createElement("span",{className:"text-danger"},"*"))),e.type!==a.DISPLAY&&e.type!==a.GROUP&&r&&o.createElement("div",{className:"col-md-4"},o.createElement(c.default,{selectTargetItem:n,title:"Question Type",item:e})))}renderFooter(){const{item:e,questionnaire:t}=this.props;return o.createElement("div",null,o.createElement("div",{className:"d-flex justify-content-start align-items-center"},o.createElement("div",null,e.type!==a.GROUP&&e.type!==a.DISPLAY&&o.createElement(u.Form,{className:"mr-3",getApi:this.getFormApi_2.bind(this),initialValues:e,onSubmit:this.handleSubmit_2.bind(this)},o.createElement("div",{className:"form-check"},o.createElement(u.Checkbox,{key:e.required+"",field:"required",type:"checkbox",className:"form-check-input",id:`${e.id}-required`,onChange:this.submitForm_2.bind(this)}),o.createElement("label",{className:"mb-0",htmlFor:`${e.id}-required`},"Required"))))),o.createElement("div",{className:"item-settings"},e.type!==a.GROUP&&e.type!==a.DISPLAY&&o.createElement("hr",null),t&&o.createElement(d.default,{questionnaire:t,item:e})))}render(){const{item:e,nestingLevel:t,className:n,subscribe:r,targetItemId:i,settingsDisplayMode:a,targetGroupId:l,selectTargetItem:u}=this.props,{bottomMenuShowed:c}=this.state,d=this.getClassNameIdentifier(),f=a===p.default.insideItem,v=i===e.id,g=v?h.activeItemClassName:"";return o.createElement("div",{className:`${d} card mb-3 ${g} ${n}`,"data-id":e.id,ref:this.itemRef,onFocus:this.selectTargetItem.bind(this),onClick:this.selectTargetItem.bind(this)},o.createElement("div",{className:"card-header drag-handle"},this.renderHeader()),o.createElement("div",{className:"card-body"},this.renderHeadline(),o.createElement("div",{className:"questionnaire-item__details"},o.createElement(s.default,{item:e,key:e.id,nestingLevel:t,subscribe:r,isItemActive:v}))),f&&v&&o.createElement("div",{className:"card-footer"},this.renderFooter()),e.parent&&e.parent.id===l&&o.createElement("div",{className:"bottom-line",onFocus:this.preventClosingBottomMenu.bind(this),onBlur:this.prepareClosingBottomMenu.bind(this),ref:this.bottomLineRef},o.createElement("hr",null),o.createElement("div",{className:"dropup d-flex"},o.createElement("button",{className:"toggle btn btn-outline-secondary",onClick:this.toggleBottomMenu.bind(this),title:"Add item"},o.createElement("i",{className:"fas fa-bars"})),c&&o.createElement(m.default,{close:this.closeBottomMenu.bind(this),selectTargetItem:u,item:e}))))}}t.ItemWrapper=v,v.defaultProps={className:""},t.default=l.useObservableModel(v)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(3)),a=n(22),l=n(23),s=n(24),u=n(25),c=n(26),d=n(27),f=n(28),h=n(29),p=n(30),m=n(31),v=n(32),g=n(34);t.ItemProvider=e=>{const{item:t}=e;switch(t.type){case o.GROUP:return i.createElement(a.GroupItem,Object.assign({},e));case o.TEXT:return i.createElement(l.TextItem,Object.assign({},e));case o.STRING:return i.createElement(s.StringItem,Object.assign({},e));case o.DECIMAL:return i.createElement(u.DecimalItem,Object.assign({},e));case o.BOOLEAN:return i.createElement(c.BooleanItem,Object.assign({},e));case o.TIME:return i.createElement(d.TimeItem,Object.assign({},e));case o.DATE:return i.createElement(f.DateItem,Object.assign({},e));case o.DATE_TIME:return i.createElement(h.DateTimeItem,Object.assign({},e));case o.ATTACHMENT:return i.createElement(p.AttachmentItem,Object.assign({},e));case o.CHOICE:return i.createElement(m.ChoiceItem,Object.assign({},e));case o.OPEN_CHOICE:return i.createElement(v.OpenChoiceItem,Object.assign({},e));case o.MULTI_CHOICE:return i.createElement(g.MultiChoiceItem,Object.assign({},e));default:return null}},t.default=t.ItemProvider},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(1),l=i(n(8)),s=i(n(7));class u extends o.Component{render(){const{item:e,nestingLevel:t,subscribe:n,isItemActive:r}=this.props;return o.createElement("div",null,0===e.items.length&&r&&o.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center"},o.createElement(s.default,{item:e})),o.createElement(l.default,{itemList:e.items,nestingLevel:t,subscribe:n,isItemActive:r}))}}t.GroupItem=u,t.default=a.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.TextArea,{autoComplete:"off",className:"form-control js-text-area",initialValue:t,field:"value",id:`${e.id}-initial`,placeholder:"Patient default answer",onBlur:this.submitForm.bind(this)}))}}t.TextItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.Text,{autoComplete:"off",className:"form-control",initialValue:t,field:"value",id:`${e.id}-initial`,placeholder:"Patient default answer",onBlur:this.submitForm.bind(this)}))}}t.StringItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.Text,{autoComplete:"off",className:"form-control",type:"number",initialValue:t,field:"value",id:`${e.id}-initial`,placeholder:"Patient default answer",onBlur:this.submitForm.bind(this)}))}}t.DecimalItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{reset(){const{item:e}=this.props;e.clearInitialAnswers()}render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("div",{className:"d-flex align-items-baseline"},o.createElement("label",{className:"question-item-label mr-3 mb-0"},"Default answer"),e.initialAnswers.length>0&&o.createElement("button",{type:"button",className:"btn btn-link text-secondary p-0",onClick:this.reset.bind(this)},"Remove default value")),o.createElement(a.RadioGroup,{initialValue:t,field:"value"},o.createElement("div",null,o.createElement("div",{className:"form-check"},o.createElement(a.Radio,{className:"form-check-input",id:`${e.id}-true`,value:!0,onChange:this.submitForm.bind(this)}),o.createElement("label",{className:"form-check-label",htmlFor:`${e.id}-true`},"Yes")),o.createElement("div",{className:"form-check"},o.createElement(a.Radio,{className:"form-check-input",id:`${e.id}-false`,value:!1,onChange:this.submitForm.bind(this)}),o.createElement("label",{className:"form-check-label",htmlFor:`${e.id}-false`},"No")))))}}t.BooleanItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.Text,{autoComplete:"off",className:"form-control",type:"time",initialValue:t,field:"value",id:`${e.id}-initial`,onBlur:this.submitForm.bind(this)}))}}t.TimeItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.Text,{autoComplete:"off",className:"form-control",type:"date",initialValue:t,field:"value",id:`${e.id}-initial`,onBlur:this.submitForm.bind(this)}))}}t.DateItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(2),l=n(1),s=i(n(4));class u extends s.default{render(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement(a.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("label",{htmlFor:`${e.id}-initial`,className:"question-item-label"},"Default answer"),o.createElement(a.Text,{autoComplete:"off",className:"form-control",type:"datetime-local",initialValue:t,field:"value",id:`${e.id}-initial`,onBlur:this.submitForm.bind(this)}))}}t.DateTimeItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=n(1),l=n(2),s=i(n(4));class u extends s.default{getFormApi(e){this.formApi=e}handleSubmit(e){const{item:t}=this.props;t.updateItem({...t,multipleFiles:!!e.multipleFiles})}componentDidUpdate(){const{item:e}=this.props;this.formApi&&this.formApi.setValue("multipleFiles",e.multipleFiles)}render(){const{item:e}=this.props;return o.createElement(l.Form,{getApi:this.getFormApi.bind(this),key:e.id,onSubmit:this.handleSubmit.bind(this)},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"file",className:"form-control-file",id:`${e.id}-initial`,disabled:!0})),o.createElement("div",null,o.createElement("div",{className:"form-check"},o.createElement(l.Checkbox,{className:"form-check-input",initialValue:e.multipleFiles,field:"multipleFiles",id:`${e.id}-multipleFiles`,onChange:this.submitForm.bind(this)}),o.createElement("label",{className:"form-check-label",htmlFor:`${e.id}-multipleFiles`},"Allow multiple upload"))))}}t.AttachmentItem=u,t.default=a.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(1),s=i(n(9)),u=n(2),c=i(n(4));class d extends c.default{constructor(){super(...arguments),this.answerOptionFactory=new a.AnswerOptionFactory(this.props.item)}reset(){const{item:e}=this.props;e.clearInitialAnswers()}addOption(){const{item:e}=this.props;e.addAnswerOption(this.answerOptionFactory.createAnswerOption())}renderChoiceOptions(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement("div",{className:"option-list"},o.createElement(u.Form,{getApi:this.getFormApi.bind(this),onSubmit:this.handleSubmit.bind(this)},o.createElement(u.RadioGroup,{initialValue:t,field:"value"},e.options.map(e=>o.createElement(s.default,{key:e.id,option:e})))))}render(){return o.createElement("div",null,o.createElement("button",{className:"btn btn-link text-secondary pl-0",onClick:this.reset.bind(this)},"Remove default value"),this.renderChoiceOptions(),o.createElement("div",null,o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:this.addOption.bind(this)},o.createElement("i",{className:"fas fa-plus mr-1"}),o.createElement("span",null,"Add option"))))}}t.ChoiceItem=d,t.default=l.useObservableModel(d)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(1),s=i(n(9)),u=n(2),c=i(n(4)),d=n(33);class f extends c.default{constructor(){super(...arguments),this.answerOptionFactory=new a.AnswerOptionFactory(this.props.item)}reset(){const{item:e}=this.props;e.clearInitialAnswers()}addOption(){const{item:e}=this.props;e.addAnswerOption(this.answerOptionFactory.createAnswerOption())}renderChoiceOptions(){const{item:e}=this.props,t=e.initialAnswers[0]&&e.initialAnswers[0].value;return o.createElement("div",{className:"option-list"},o.createElement(u.Form,{getApi:this.getFormApi.bind(this),onSubmit:this.handleSubmit.bind(this)},o.createElement(u.RadioGroup,{initialValue:t,field:"value"},e.options.map((t,n)=>n===e.options.length-1?o.createElement(d.ChoiceOptionOther,{key:t.id,option:t}):o.createElement(s.default,{key:t.id,option:t})))))}render(){return o.createElement("div",null,o.createElement("button",{className:"btn btn-link text-secondary pl-0",onClick:this.reset.bind(this)},"Remove default value"),this.renderChoiceOptions(),o.createElement("div",null,o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:this.addOption.bind(this)},o.createElement("i",{className:"fas fa-plus mr-1"}),o.createElement("span",null,"Add option"))))}}t.OpenChoiceItem=f,t.default=l.useObservableModel(f)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(1);class a extends i.Component{constructor(){super(...arguments),this.RadioRef=i.createRef()}onBlur(e){const{option:t}=this.props;t.setValue(e.target.value)}remove(){const{option:e}=this.props;e.remove()}onChange(e){const{option:t}=this.props;e.target.checked?t.selectAsDefault():t.unselectAsDefault()}render(){const{option:e}=this.props,t=!e.defaultSelected;return i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:`${e.id}-option`},"Other"),i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},i.createElement("div",{className:"input-group-text"},i.createElement("label",{htmlFor:`${e.id}-initial`,className:"mr-1 mb-0"},"By default"),i.createElement("input",{checked:e.defaultSelected,id:`${e.id}-initial`,type:"radio",onChange:this.onChange.bind(this)}))),i.createElement("input",{autoComplete:"off",id:`${e.id}-option`,className:"form-control",disabled:t,defaultValue:e.value,onBlur:this.onBlur.bind(this)})))}}t.ChoiceOptionOther=a,t.default=o.useObservableModel(a)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(1),s=i(n(35));class u extends o.Component{constructor(){super(...arguments),this.answerOptionFactory=new a.AnswerOptionFactory(this.props.item)}addOption(){const{item:e}=this.props;e.addAnswerOption(this.answerOptionFactory.createAnswerOption())}renderChoiceOptions(){const{item:e}=this.props;return o.createElement("div",{className:"option-list"},e.options.map(t=>o.createElement(s.default,{key:t.id,option:t,item:e})))}render(){return o.createElement("div",null,this.renderChoiceOptions(),o.createElement("div",null,o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:this.addOption.bind(this)},o.createElement("i",{className:"fas fa-plus mr-1"}),o.createElement("span",null,"Add option"))))}}t.MultiChoiceItem=u,t.default=l.useObservableModel(u)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(1);class a extends i.Component{onBlur(e){const{option:t}=this.props;t.setValue(e.target.value)}remove(){const{option:e}=this.props;e.remove()}onChange(e){const{option:t}=this.props;e.target.checked?t.selectAsDefault():t.unselectAsDefault()}renderCheckbox(){const{option:e}=this.props;return i.createElement("div",{className:"input-group-text"},i.createElement("label",{className:"mr-1 mb-0",htmlFor:`${e.id}-checkbox`},"By default"),i.createElement("input",{id:`${e.id}-checkbox`,type:"checkbox",checked:e.defaultSelected,onChange:this.onChange.bind(this)}))}render(){const{option:e}=this.props;return i.createElement("div",{className:"form-group"},i.createElement("div",{className:"input-group"},i.createElement("div",{className:"input-group-prepend"},this.renderCheckbox()),i.createElement("input",{autoComplete:"off",className:"form-control",defaultValue:e.value,onBlur:this.onBlur.bind(this)}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.remove.bind(this)},i.createElement("i",{className:"fas fa-trash"})))))}}t.MultiChoiceOption=a,t.default=o.useObservableModel(a)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=i(n(5)),s=n(37);class u extends o.Component{constructor(e){super(e),this.options=s.questionTypes,this.humanReadableGuide=l.default.getHumanReadableGuid(),this.item=e.item,this.factory=new a.ItemFactory(this.item.parent)}onChange(e){switch(e.target.value){case a.STRING:this.changeItemToString();break;case a.TEXT:this.changeItemToText();break;case a.BOOLEAN:this.changeItemToBoolean();break;case a.DECIMAL:this.changeItemToDecimal();break;case a.TIME:this.changeItemToTime();break;case a.DATE:this.changeItemToDate();break;case a.DATE_TIME:this.changeItemToDateTime();break;case a.CHOICE:this.changeItemToChoice();break;case a.OPEN_CHOICE:this.changeItemToOpenChoice();break;case a.ATTACHMENT:this.changeItemToAttachment();break;case a.MULTI_CHOICE:this.changeItemToMultiChoice();break;default:return}}changeItemToString(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createStringItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToText(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createTextItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToBoolean(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createBooleanItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToDecimal(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createDecimalItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToTime(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createTimeItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToDate(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createDateItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToDateTime(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createDateTimeItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}changeItemToChoice(){const{item:e,selectTargetItem:t}=this.props,n=new a.AnswerOptionFactory;let r;void 0===e.options||0===e.options.length||e.type===a.OPEN_CHOICE&&1===e.options.length?r=[n.createAnswerOption({value:"Option 1"})]:(r=e.options.slice(),e.type===a.OPEN_CHOICE&&r.pop());const i=this.factory.createChoiceItem({text:e.text,options:r,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});i.options.forEach(e=>{e.parent=i}),e.replace(i),t&&t(i),this.humanReadableGuide.updateKey(e.id,i.id)}changeItemToOpenChoice(){const{item:e,selectTargetItem:t}=this.props,n=new a.AnswerOptionFactory;let r;r=void 0===e.options?[n.createAnswerOption({value:"Option 1"})]:0===e.options.length?[n.createAnswerOption({value:"Option 1"})]:e.options.slice(),r.push(n.createAnswerOption());const i=this.factory.createOpenChoiceItem({text:e.text,options:r,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});i.options.forEach(e=>{e.parent=i}),e.replace(i),t&&t(i),this.humanReadableGuide.updateKey(e.id,i.id)}changeItemToMultiChoice(){const{item:e,selectTargetItem:t}=this.props,n=new a.AnswerOptionFactory;let r;void 0===e.options||0===e.options.length||e.type===a.OPEN_CHOICE&&1===e.options.length?r=[n.createAnswerOption({value:"Option 1"})]:(r=e.options.slice(),e.type===a.OPEN_CHOICE&&r.pop());const i=this.factory.createMultiChoiceItem({text:e.text,options:r,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});i.options.forEach(e=>{e.parent=i}),e.replace(i),t&&t(i),this.humanReadableGuide.updateKey(e.id,i.id)}changeItemToAttachment(){const{item:e,selectTargetItem:t}=this.props,n=this.factory.createAttachmentItem({text:e.text,required:e.required,enableWhen:e.enableWhen,enableBehavior:e.enableBehavior});e.replace(n),t&&t(n),this.humanReadableGuide.updateKey(e.id,n.id)}render(){const{item:e,title:t}=this.props;return o.createElement("div",null,o.createElement("label",{htmlFor:`${e.id}-select-menu`},t),o.createElement("select",{id:`${e.id}-select-menu`,className:"form-control",defaultValue:e.type,onChange:this.onChange.bind(this)},this.options.map(t=>o.createElement("option",{key:`${e.id}-${t.value}`,value:t.value},t.title))))}}t.QuestionTypeMenu=u,t.default=u},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(3));t.questionTypes=[{title:"String (one row)",value:i.STRING},{title:"Text (several rows)",value:i.TEXT},{title:"Number",value:i.DECIMAL},{title:"Date",value:i.DATE},{title:"Time",value:i.TIME},{title:"Date-time",value:i.DATE_TIME},{title:"Yes/No question",value:i.BOOLEAN},{title:"Single choice",value:i.CHOICE},{title:"Open choice",value:i.OPEN_CHOICE},{title:"Multiple choice",value:i.MULTI_CHOICE},{title:"Attachment",value:i.ATTACHMENT}]},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(2),s=i(n(39)),u=n(1);class c extends o.Component{constructor(e){super(e),this.enableWhenFactory=new a.EnableWhenFactory(e.item)}getFormApi(e){this.formApi=e}componentDidUpdate(){const{item:e}=this.props;this.formApi&&this.formApi.setValues(e)}fillQuestionList(e,t){t.items&&t.items.forEach(t=>{t.type===a.GROUP?this.fillQuestionList(e,t):t.type!==a.DISPLAY&&t.type!==a.ATTACHMENT&&e.push(t)})}prepareQuestionList(){const{questionnaire:e}=this.props,t=[];return this.fillQuestionList(t,e),t}addEnableWhen(){const{item:e}=this.props,t=this.enableWhenFactory.createEnableWhen({operator:a.EQUAL});e.addEnableWhen(t)}removeAllEnableWhen(){const{item:e}=this.props;e.enableWhen=[]}setEnableBehavior(){const{item:e}=this.props;this.formApi&&(e.enableBehavior=this.formApi.getValue("enableBehavior"))}render(){const{item:e}=this.props,t=this.prepareQuestionList();return o.createElement("div",{className:"enable-when"},o.createElement(l.Form,{initialValues:e,getApi:this.getFormApi.bind(this)},o.createElement("div",{className:"d-flex"},o.createElement("label",{htmlFor:`enableWhenBehavior-${e.id}`,className:"mr-3"},o.createElement("span",null,"This component should Display if "),o.createElement(l.Select,{id:`enableWhenBehavior-${e.id}`,className:"form-control w-auto d-inline ml-2",field:"enableBehavior",onChange:this.setEnableBehavior.bind(this)},o.createElement(l.Option,{value:a.AND},"all the rules are consistent"),o.createElement(l.Option,{value:a.OR},"one of the rules is consistent")))),o.createElement("div",null,o.createElement("div",{className:"list-group list-group-flush form-group"},!!e.enableWhen.length&&o.createElement("div",{className:"list-group-item list-group-item-action"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col col-3"},"Question"),o.createElement("div",{className:"col col-3"},"Operator"),o.createElement("div",{className:"col col-5"},"Answer"),o.createElement("div",{className:"col col-1"}))),o.createElement(l.Scope,{scope:"enableWhen"},e.enableWhen.map((n,r)=>{const i=t.filter(t=>t.id!==e.id);return o.createElement(o.Fragment,{key:n.id},o.createElement(s.default,{questionList:i,enableWhen:n,index:r}))})))),o.createElement("div",null,o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:this.addEnableWhen.bind(this)},o.createElement("i",{className:"fas fa-plus mr-1"}),"Add Rule"))))}}t.EnableSettings=c,t.default=u.useObservableModel(c)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=n(2),s=i(n(40)),u=n(1),c=i(n(5));class d extends o.Component{constructor(e){super(e),this.state={},this.operators=[{value:a.EQUAL,text:"Equal( == )"},{value:a.NOT_EQUAL,text:"Not equal( != )"},{value:a.EXISTS,text:"Exists( not null )"},{value:a.MORE,text:"More( > )"},{value:a.LESS,text:"Less( < )"},{value:a.MORE_OR_EQUAL,text:"More or equal( >= )"},{value:a.LESS_OR_EQUAL,text:"Less or equal( <= )"}],this.humanReadableGuid=c.default.getHumanReadableGuid();const t=e.enableWhen.questionId,n=e.questionList.find(e=>e.id===t);this.state={selectedQuestion:n}}selectQuestion(e){const{questionList:t,enableWhen:n,formApi:r,index:i}=this.props,o=r.getValue(`${i}][questionId`),a=t.find(e=>e.id===o);n.questionId=o,this.setState({selectedQuestion:a})}removeEnableWhen(){const{enableWhen:e}=this.props;e.remove()}setOperator(e){const{enableWhen:t}=this.props,n=e.target.value;t.operator=n}renderQuestionSelect(){const{questionList:e,index:t}=this.props;return o.createElement(l.Select,{className:"form-control",field:`${t}][questionId`,onChange:this.selectQuestion.bind(this)},o.createElement(l.Option,{value:"",disabled:!0},"Select question"),e.map(e=>o.createElement(l.Option,{key:`${e.id}-enableWhenQuestion`,value:e.id},`#${this.humanReadableGuid.getHumanReadableId(e.id)} ${void 0===e.text?"":e.text}`)))}renderOperatorSelect(){const{index:e}=this.props;return o.createElement(l.Select,{className:"form-control",field:`${e}][operator`,onChange:this.setOperator.bind(this)},o.createElement(l.Option,{value:"",disabled:!0},"Select operator"),this.operators.map((e,t)=>o.createElement(l.Option,{key:t,value:e.value},e.text)))}render(){const{index:e,enableWhen:t}=this.props,{selectedQuestion:n}=this.state;return o.createElement("div",{className:"list-group-item list-group-item-action"},o.createElement("div",{className:"row align-items-center"},o.createElement("div",{className:"col col-3"},this.renderQuestionSelect()),o.createElement("div",{className:"col col-3"},this.renderOperatorSelect()),o.createElement("div",{className:"col"},o.createElement(s.default,{item:n,index:e,enableWhen:t})),o.createElement("div",{className:"col col-auto"},o.createElement("button",{className:"btn btn-outline-secondary border-0",onClick:this.removeEnableWhen.bind(this)},o.createElement("i",{className:"fas fa-trash"})))))}}t.EnableWhen=d,t.default=l.withFormApi(u.useObservableModel(d))},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),a=r(n(3)),l=i(n(41)),s=i(n(42)),u=i(n(43)),c=i(n(44)),d=i(n(45));t.QuestionItemProvider=e=>{const{item:t={},index:n,enableWhen:r}=e;switch(t.type){case a.STRING:return o.createElement(l.default,{enableWhen:r,index:n,type:"text"});case a.TEXT:return o.createElement(l.default,{enableWhen:r,index:n,type:"textarea"});case a.TIME:return o.createElement(l.default,{enableWhen:r,index:n,type:"time"});case a.DATE:return o.createElement(l.default,{enableWhen:r,index:n,type:"date"});case a.DATE_TIME:return o.createElement(l.default,{enableWhen:r,index:n,type:"datetime-local"});case a.DECIMAL:return o.createElement(l.default,{enableWhen:r,index:n,type:"number"});case a.CHOICE:case a.MULTI_CHOICE:return o.createElement(s.default,{enableWhen:r,index:n,item:t});case a.OPEN_CHOICE:return o.createElement(u.default,{enableWhen:r,index:n,item:t});case a.BOOLEAN:return o.createElement(c.default,{enableWhen:r,index:n});default:return o.createElement(d.default,null)}},t.default=t.QuestionItemProvider},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(2);t.Input=e=>{const{type:t,index:n,enableWhen:r}=e,a=o.useFormApi(),l=()=>{const e=a.getValue(`${n}][answer`);r.answer=e};return i.createElement("div",null,"textarea"===t?i.createElement(o.TextArea,{className:"form-control",field:`${n}][answer`,id:"enableWhenAnswer",onBlur:l}):i.createElement(o.Text,{type:t,className:"form-control",field:`${n}][answer`,id:"enableWhenAnswer",onBlur:l}))},t.default=t.Input},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(2);t.Choice=e=>{const{item:t,index:n,enableWhen:r}=e,a=o.useFormApi();return i.createElement(o.Select,{className:"form-control",field:`${n}][answer`,onChange:()=>{const e=a.getValue(`${n}][answer`),i=t.options&&t.options.find(t=>t.id===e);i&&(r.answer=i.value)}},i.createElement(o.Option,{value:"",disabled:!0},"Select answer"),t.options&&t.options.map((e,t)=>i.createElement(o.Option,{key:t,value:e.id},e.value)))},t.default=t.Choice},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(2);class a extends i.Component{constructor(e){super(e),this.otherAnswerInputRef=i.createRef(),e.item.options&&e.item.options.every(t=>t.value!==e.enableWhen.answer)&&0!==e.item.options.length&&(this.initialOtherOptionValue=e.enableWhen.answer,this.toggleToOtherOption())}onChange(){const{enableWhen:e,formApi:t,index:n,item:r}=this.props;let i=!1;const o=t.getValue(`${n}][answer`),a=r.options&&r.options.find((e,t)=>e.id===o&&(r.options&&t===r.options.length-1&&(i=!0),!0));i?this.toggleToOtherOption():(this.toggleToOptions(),a&&(e.answer=a.value))}toggleToOptions(){this.otherAnswerInputRef.current&&(this.otherAnswerInputRef.current.style.display="none")}toggleToOtherOption(){this.otherAnswerInputRef.current&&(this.otherAnswerInputRef.current.style.display=""),this.onBlur()}onBlur(){const{enableWhen:e}=this.props;this.otherAnswerInputRef.current&&(e.answer=this.otherAnswerInputRef.current.value)}render(){const{item:e,index:t}=this.props;return i.createElement("div",{className:"row"},i.createElement("div",{className:"col-5"},i.createElement(o.Select,{className:"form-control",field:`${t}][answer`,onChange:this.onChange.bind(this)},i.createElement(o.Option,{value:"",disabled:!0},"Select answer"),e.options&&e.options.map((t,n)=>i.createElement(o.Option,{key:n,value:t.id},e.options&&n===e.options.length-1?"Other":t.value)))),i.createElement("div",{className:"col-7"},i.createElement(o.Text,{field:`${t}][answer-other`,className:"form-control",forwardedRef:this.otherAnswerInputRef,onBlur:this.onBlur.bind(this),initialValue:this.initialOtherOptionValue,style:{display:"none"}})))}}t.OpenChoice=a,t.default=o.withFormApi(a)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(2);t.Boolean=e=>{const{index:t,enableWhen:n}=e,r=o.useFormApi();return i.createElement(o.Select,{className:"form-control",field:`${t}][answer`,onChange:()=>{const e=r.getValue(`${t}][answer`);n.answer="true"===e}},i.createElement(o.Option,{value:"",disabled:!0},"Select answer"),i.createElement(o.Option,{value:!0},"Yes"),i.createElement(o.Option,{value:!1},"No"))},t.default=t.Boolean},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0));t.DefaultAnswerInput=()=>i.createElement("input",{className:"form-control",disabled:!0}),t.default=t.DefaultAnswerInput},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activeItemClassName="card-active shadow"},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(3));class a extends i.Component{constructor(){super(...arguments),this.itemFactory=new o.ItemFactory}addItem(){const{item:e,selectTargetItem:t,close:n}=this.props,r=this.itemFactory.createItem();e.addSiblingItemAfter(r),t&&t(r),n&&n()}addGroupItem(){const{item:e,selectTargetItem:t,close:n}=this.props,r=this.itemFactory.createGroupItem();e.addSiblingItemAfter(r),t&&t(r),n&&n()}addChoiceItem(){const{item:e,selectTargetItem:t,close:n}=this.props,r=this.itemFactory.createChoiceItem(),i=new o.AnswerOptionFactory(r);r.addAnswerOption(i.createAnswerOption({value:"Option 1"})),e.addSiblingItemAfter(r),t&&t(r),n&&n()}render(){return i.createElement("div",{className:"dropdown-menu dropdown-menu-right btn-group-vertical"},i.createElement("button",{className:"btn btn-secondary",title:"Add text",onClick:this.addItem.bind(this)},i.createElement("i",{className:"fas fa-font"})),i.createElement("button",{className:"btn btn-secondary",title:"Add group",onClick:this.addGroupItem.bind(this)},i.createElement("i",{className:"fas fa-layer-group"})),i.createElement("button",{className:"btn btn-secondary",title:"Add question",onClick:this.addChoiceItem.bind(this)},i.createElement("i",{className:"fas fa-plus"})))}}t.BottomItemCollectionMenu=a,t.default=a},function(e,t,n){"use strict";
/**!
 * Sortable 1.10.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(t),n.d(t,"MultiDrag",(function(){return yt})),n.d(t,"Sortable",(function(){return Ve})),n.d(t,"Swap",(function(){return st}));function u(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=u(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=u(/Edge/i),f=u(/firefox/i),h=u(/safari/i)&&!u(/chrome/i)&&!u(/android/i),p=u(/iP(ad|od|hone)/i),m=u(/chrome/i)&&u(/android/i),v={capture:!1,passive:!1};function g(e,t,n){e.addEventListener(t,n,!c&&v)}function b(e,t,n){e.removeEventListener(t,n,!c&&v)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function E(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||r&&e===n)return e;if(e===n)break}while(e=E(e))}return null}var w,O=/\s+/g;function C(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(O," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(O," ")}}function A(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function S(e,t){var n="";if("string"==typeof e)n=e;else do{var r=A(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix;return i&&new i(n)}function x(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function I(){return c?document.documentElement:document.scrollingElement}function T(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,a,l,s,u,d,f;if(e!==window&&e!==I()?(a=(o=e.getBoundingClientRect()).top,l=o.left,s=o.bottom,u=o.right,d=o.height,f=o.width):(a=0,l=0,s=window.innerHeight,u=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!c))do{if(i&&i.getBoundingClientRect&&("none"!==A(i,"transform")||n&&"static"!==A(i,"position"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(A(i,"border-top-width")),l-=h.left+parseInt(A(i,"border-left-width")),s=a+o.height,u=l+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var p=S(i||e),m=p&&p.a,v=p&&p.d;p&&(s=(a/=v)+(d/=v),u=(l/=m)+(f/=m))}return{top:a,left:l,bottom:s,right:u,width:f,height:d}}}function F(e,t,n){for(var r=P(e,!0),i=T(e)[t];r;){var o=T(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===I())break;r=P(r,!1)}return!1}function M(e,t,n){for(var r=0,i=0,o=e.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==Ve.ghost&&o[i]!==Ve.dragged&&_(o[i],n.draggable,e,!1)){if(r===t)return o[i];r++}i++}return null}function N(e,t){for(var n=e.lastElementChild;n&&(n===Ve.ghost||"none"===A(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function D(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ve.clone||t&&!y(e,t)||n++;return n}function j(e){var t=0,n=0,r=I();if(e)do{var i=S(e),o=i.a,a=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function P(e,t){if(!e||!e.getBoundingClientRect)return I();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=A(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return I();if(r||t)return n;r=!0}}}while(n=n.parentNode);return I()}function k(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function R(e,t){return function(){if(!w){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),w=setTimeout((function(){w=void 0}),t)}}}function L(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function B(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function V(e,t){A(e,"position","absolute"),A(e,"top",t.top),A(e,"left",t.left),A(e,"width",t.width),A(e,"height",t.height)}function q(e){A(e,"position",""),A(e,"top",""),A(e,"left",""),A(e,"width",""),A(e,"height","")}var G="Sortable"+(new Date).getTime();function W(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==A(e,"display")&&e!==Ve.ghost){t.push({target:e,rect:T(e)});var n=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=S(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=T(n),s=n.prevFromRect,u=n.prevToRect,c=e.rect,d=S(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&k(s,l)&&!k(a,l)&&(c.top-l.top)/(c.left-l.left)==(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,s,u,r.options)),k(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=r.options.animation),r.animate(n,c,l,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){A(e,"transition",""),A(e,"transform","");var i=S(this.el),o=i&&i.a,a=i&&i.d,l=(t.left-n.left)/(o||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,A(e,"transform","translate3d("+l+"px,"+s+"px,0)"),function(e){e.offsetWidth}(e),A(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),A(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){A(e,"transition",""),A(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var $=[],H={initializeByDefault:!0},U={mount:function(e){for(var t in H)!H.hasOwnProperty(t)||t in e||(e[t]=H[t]);$.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";$.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](a({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](a({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in $.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,o(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return $.forEach((function(r){"function"==typeof r.eventProperties&&o(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return $.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function Y(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,l=e.toEl,s=e.fromEl,u=e.oldIndex,f=e.newIndex,h=e.oldDraggableIndex,p=e.newDraggableIndex,m=e.originalEvent,v=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[G]){var b,y=t.options,E="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||c||d?(b=document.createEvent("Event")).initEvent(r,!0,!0):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=l||n,b.from=s||n,b.item=i||n,b.clone=o,b.oldIndex=u,b.newIndex=f,b.oldDraggableIndex=h,b.newDraggableIndex=p,b.originalEvent=m,b.pullMode=v?v.lastPutMode:void 0;var _=a({},g,U.getEventProperties(r,t));for(var w in _)b[w]=_[w];n&&n.dispatchEvent(b),y[E]&&y[E].call(t,b)}}var Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=l(n,["evt"]);U.pluginEvent.bind(Ve)(e,t,a({dragEl:z,parentEl:K,ghostEl:J,rootEl:Z,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:re,dragStarted:ve,putSortable:ue,activeSortable:Ve.active,originalEvent:r,oldIndex:ie,oldDraggableIndex:ae,newIndex:oe,newDraggableIndex:le,hideGhostForTarget:ke,unhideGhostForTarget:Re,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(e){X({sortable:t,name:e,originalEvent:r})}},i))};function X(e){Y(a({putSortable:ue,cloneEl:ne,targetEl:z,rootEl:Z,oldIndex:ie,oldDraggableIndex:ae,newIndex:oe,newDraggableIndex:le},e))}var z,K,J,Z,ee,te,ne,re,ie,oe,ae,le,se,ue,ce,de,fe,he,pe,me,ve,ge,be,ye,Ee,_e=!1,we=!1,Oe=[],Ce=!1,Ae=!1,Se=[],xe=!1,Ie=[],Te="undefined"!=typeof document,Fe=p,Me=d||c?"cssFloat":"float",Ne=Te&&!m&&!p&&"draggable"in document.createElement("div"),De=function(){if(Te){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),je=function(e,t){var n=A(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=M(e,0,t),o=M(e,1,t),a=i&&A(i),l=o&&A(o),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+T(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=r&&"none"===n[Me]||o&&"none"===n[Me]&&s+u>r)?"vertical":"horizontal"},Pe=function(e){function t(e,n){return function(r,i,o,a){var l=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var s=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==r(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},ke=function(){!De&&J&&A(J,"display","none")},Re=function(){!De&&J&&A(J,"display","")};Te&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var Le=function(e){if(z){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,o=e.clientY,Oe.some((function(e){if(!N(e)){var t=T(e),n=e[G].options.emptyInsertThreshold,r=i>=t.left-n&&i<=t.right+n,l=o>=t.top-n&&o<=t.bottom+n;return n&&r&&l?a=e:void 0}})),a);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[G]._onDragOver(n)}}var i,o,a},Be=function(e){z&&z.parentNode[G]._isOutsideThisEl(e.target)};function Ve(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[G]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return je(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ve.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in U.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Pe(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Ne,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?g(e,"pointerdown",this._onTapStart):(g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Oe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,W())}function qe(e,t,n,r,i,o,a,l){var s,u,f=e[G],h=f.options.onMove;return!window.CustomEvent||c||d?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=i||t,s.relatedRect=o||T(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),h&&(u=h.call(f,s,a)),u}function Ge(e){e.draggable=!1}function We(){xe=!1}function $e(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function He(e){return setTimeout(e,0)}function Ue(e){return clearTimeout(e)}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,z):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(function(e){Ie.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Ie.push(r)}}(n),!z&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled||s.isContentEditable||(l=_(l,r.draggable,n,!1))&&l.animated||te===l)){if(ie=D(l),ae=D(l,r.draggable),"function"==typeof u){if(u.call(this,e,l,this))return X({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Q("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=_(s,r.trim(),n,!1))return X({sortable:t,rootEl:r,name:"filter",targetEl:l,fromEl:n,toEl:n}),Q("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!_(s,r.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,a=i.options,l=o.ownerDocument;if(n&&!z&&n.parentNode===o){var s=T(n);if(Z=o,K=(z=n).parentNode,ee=z.nextSibling,te=n,se=a.group,Ve.dragged=z,ce={target:z,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=ce.clientX-s.left,me=ce.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,z.style["will-change"]="all",r=function(){Q("delayEnded",i,{evt:e}),Ve.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!f&&i.nativeDraggable&&(z.draggable=!0),i._triggerDragStart(e,t),X({sortable:i,name:"choose",originalEvent:e}),C(z,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){x(z,e.trim(),Ge)})),g(l,"dragover",Le),g(l,"mousemove",Le),g(l,"touchmove",Le),g(l,"mouseup",i._onDrop),g(l,"touchend",i._onDrop),g(l,"touchcancel",i._onDrop),f&&this.nativeDraggable&&(this.options.touchStartThreshold=4,z.draggable=!0),Q("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||c))r();else{if(Ve.eventCanceled)return void this._onDrop();g(l,"mouseup",i._disableDelayedDrag),g(l,"touchend",i._disableDelayedDrag),g(l,"touchcancel",i._disableDelayedDrag),g(l,"mousemove",i._delayedDragTouchMoveHandler),g(l,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&g(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){z&&Ge(z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):g(document,t?"touchmove":"mousemove",this._onTouchMove):(g(z,"dragend",this),g(Z,"dragstart",this._onDragStart));try{document.selection?He((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(_e=!1,Z&&z){Q("dragStarted",this,{evt:t}),this.nativeDraggable&&g(document,"dragover",Be);var n=this.options;!e&&C(z,n.dragClass,!1),C(z,n.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),X({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,ke();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(z.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){if(t[G]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Re()}},_onTouchMove:function(e){if(ce){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=J&&S(J),a=J&&o&&o.a,l=J&&o&&o.d,s=Fe&&Ee&&j(Ee),u=(i.clientX-ce.clientX+r.x)/(a||1)+(s?s[0]-Se[0]:0)/(a||1),c=(i.clientY-ce.clientY+r.y)/(l||1)+(s?s[1]-Se[1]:0)/(l||1);if(!Ve.active&&!_e){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(J){o?(o.e+=u-(fe||0),o.f+=c-(he||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");A(J,"webkitTransform",d),A(J,"mozTransform",d),A(J,"msTransform",d),A(J,"transform",d),fe=u,he=c,de=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:Z,t=T(z,!0,Fe,!0,e),n=this.options;if(Fe){for(Ee=e;"static"===A(Ee,"position")&&"none"===A(Ee,"transform")&&Ee!==document;)Ee=Ee.parentNode;Ee!==document.body&&Ee!==document.documentElement?(Ee===document&&(Ee=I()),t.top+=Ee.scrollTop,t.left+=Ee.scrollLeft):Ee=I(),Se=j(Ee)}C(J=z.cloneNode(!0),n.ghostClass,!1),C(J,n.fallbackClass,!0),C(J,n.dragClass,!0),A(J,"transition",""),A(J,"transform",""),A(J,"box-sizing","border-box"),A(J,"margin",0),A(J,"top",t.top),A(J,"left",t.left),A(J,"width",t.width),A(J,"height",t.height),A(J,"opacity","0.8"),A(J,"position",Fe?"absolute":"fixed"),A(J,"zIndex","100000"),A(J,"pointerEvents","none"),Ve.ghost=J,e.appendChild(J),A(J,"transform-origin",pe/parseInt(J.style.width)*100+"% "+me/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;Q("dragStart",this,{evt:e}),Ve.eventCanceled?this._onDrop():(Q("setupClone",this),Ve.eventCanceled||((ne=B(z)).draggable=!1,ne.style["will-change"]="",this._hideClone(),C(ne,this.options.chosenClass,!1),Ve.clone=ne),n.cloneId=He((function(){Q("clone",n),Ve.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(ne,z),n._hideClone(),X({sortable:n,name:"clone"}))})),!t&&C(z,i.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,z)),g(document,"drop",n),A(z,"transform","translateZ(0)")),_e=!0,n._dragStartId=He(n._dragStarted.bind(n,t,e)),g(document,"selectstart",n),ve=!0,h&&A(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,o=this.el,l=e.target,s=this.options,u=s.group,c=Ve.active,d=se===u,f=s.sort,h=ue||c,p=this,m=!1;if(!xe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=_(l,s.draggable,o,!0),k("dragOver"),Ve.eventCanceled)return m;if(z.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return B(!1);if(we=!1,c&&!s.disabled&&(d?f||(r=!Z.contains(z)):ue===this||(this.lastPutMode=se.checkPull(this,c,z,e))&&u.checkPut(this,c,z,e))){if(i="vertical"===this._getDirection(e,l),t=T(z),k("dragOverValid"),Ve.eventCanceled)return m;if(r)return K=Z,R(),this._hideClone(),k("revert"),Ve.eventCanceled||(ee?Z.insertBefore(z,ee):Z.appendChild(z)),B(!0);var v=N(o,s.draggable);if(!v||function(e,t,n){var r=T(N(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,i,this)&&!v.animated){if(v===z)return B(!1);if(v&&o===e.target&&(l=v),l&&(n=T(l)),!1!==qe(Z,o,z,t,l,n,e,!!l))return R(),o.appendChild(z),K=o,V(),B(!0)}else if(l.parentNode===o){n=T(l);var g,b,y,E=z.parentNode!==o,w=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return r===a||i===l||r+o/2===a+s/2}(z.animated&&z.toRect||t,l.animated&&l.toRect||n,i),O=i?"top":"left",S=F(l,"top","top")||F(z,"top","top"),x=S?S.scrollTop:void 0;if(ge!==l&&(b=n[O],Ce=!1,Ae=!w&&s.invertSwap||E),0!==(g=function(e,t,n,r,i,o,a,l){var s=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!a)if(l&&ye<u*i){if(!Ce&&(1===be?s>c+u*o/2:s<d-u*o/2)&&(Ce=!0),Ce)f=!0;else if(1===be?s<c+ye:s>d-ye)return-be}else if(s>c+u*(1-i)/2&&s<d-u*(1-i)/2)return function(e){return D(z)<D(e)?1:-1}(t);if((f=f||a)&&(s<c+u*o/2||s>d-u*o/2))return s>c+u/2?1:-1;return 0}(e,l,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ae,ge===l))){var I=D(z);do{I-=g,y=K.children[I]}while(y&&("none"===A(y,"display")||y===J))}if(0===g||y===l)return B(!1);ge=l,be=g;var M=l.nextElementSibling,j=!1,P=qe(Z,o,z,t,l,n,e,j=1===g);if(!1!==P)return 1!==P&&-1!==P||(j=1===P),xe=!0,setTimeout(We,30),R(),j&&!M?o.appendChild(z):l.parentNode.insertBefore(z,j?M:l),S&&L(S,0,x-S.scrollTop),K=z.parentNode,void 0===b||Ae||(ye=Math.abs(b-T(l)[O])),V(),B(!0)}if(o.contains(z))return B(!1)}return!1}function k(s,u){Q(s,p,a({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:f,fromSortable:h,target:l,completed:B,onMove:function(n,r){return qe(Z,o,z,t,n,T(n),e,r)},changed:V},u))}function R(){k("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function B(t){return k("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(p),p!==h&&(C(z,ue?ue.options.ghostClass:c.options.ghostClass,!1),C(z,s.ghostClass,!0)),ue!==p&&p!==Ve.active?ue=p:p===Ve.active&&ue&&(ue=null),h===p&&(p._ignoreWhileAnimating=l),p.animateAll((function(){k("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===z&&!z.animated||l===o&&!l.animated)&&(ge=null),s.dragoverBubble||e.rootEl||l===document||(z.parentNode[G]._isOutsideThisEl(e.target),!t&&Le(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function V(){oe=D(z),le=D(z,s.draggable),X({sortable:p,name:"change",toEl:o,newIndex:oe,newDraggableIndex:le,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",Le),b(document,"mousemove",Le),b(document,"touchmove",Le)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;oe=D(z),le=D(z,n.draggable),Q("drop",this,{evt:e}),K=z&&z.parentNode,oe=D(z),le=D(z,n.draggable),Ve.eventCanceled?this._nulling():(_e=!1,Ae=!1,Ce=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ue(this.cloneId),Ue(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&A(document.body,"user-select",""),e&&(ve&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(Z===K||ue&&"clone"!==ue.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),z&&(this.nativeDraggable&&b(z,"dragend",this),Ge(z),z.style["will-change"]="",ve&&!_e&&C(z,ue?ue.options.ghostClass:this.options.ghostClass,!1),C(z,this.options.chosenClass,!1),X({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==K?(oe>=0&&(X({rootEl:K,name:"add",toEl:K,fromEl:Z,originalEvent:e}),X({sortable:this,name:"remove",toEl:K,originalEvent:e}),X({rootEl:K,name:"sort",toEl:K,fromEl:Z,originalEvent:e}),X({sortable:this,name:"sort",toEl:K,originalEvent:e})),ue&&ue.save()):oe!==ie&&oe>=0&&(X({sortable:this,name:"update",toEl:K,originalEvent:e}),X({sortable:this,name:"sort",toEl:K,originalEvent:e})),Ve.active&&(null!=oe&&-1!==oe||(oe=ie,le=ae),X({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){Q("nulling",this),Z=z=K=J=ee=ne=te=re=ce=de=ve=oe=le=ie=ae=ge=be=ue=se=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Ie.forEach((function(e){e.checked=!0})),Ie.length=fe=he=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":z&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)_(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||$e(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var i=n.children[r];_(i,this.options.draggable,n,!1)&&(t[e]=i)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=U.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Pe(n)},destroy:function(){Q("destroy",this);var e=this.el;e[G]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),Oe.splice(Oe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(Q("hideClone",this),Ve.eventCanceled)return;A(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),re=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(re){if(Q("showClone",this),Ve.eventCanceled)return;Z.contains(z)&&!this.options.group.revertClone?Z.insertBefore(ne,z):ee?Z.insertBefore(ne,ee):Z.appendChild(ne),this.options.group.revertClone&&this.animate(z,ne),A(ne,"display",""),re=!1}}else this._hideClone()}},Te&&g(document,"touchmove",(function(e){(Ve.active||_e)&&e.cancelable&&e.preventDefault()})),Ve.utils={on:g,off:b,css:A,find:x,is:function(e,t){return!!_(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:R,closest:_,toggleClass:C,clone:B,index:D,nextTick:He,cancelNextTick:Ue,detectDirection:je,getChild:M},Ve.get=function(e){return e[G]},Ve.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ve.utils=a({},Ve.utils,e.utils)),U.mount(e)}))},Ve.create=function(e,t){return new Ve(e,t)},Ve.version="1.10.1";var Ye,Qe,Xe,ze,Ke,Je,Ze=[],et=!1;function tt(){Ze.forEach((function(e){clearInterval(e.pid)})),Ze=[]}function nt(){clearInterval(Je)}var rt,it=R((function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=I(),c=!1;Qe!==n&&(Qe=n,tt(),Ye=t.scroll,i=t.scrollFn,!0===Ye&&(Ye=P(n,!0)));var d=0,f=Ye;do{var h=f,p=T(h),m=p.top,v=p.bottom,g=p.left,b=p.right,y=p.width,E=p.height,_=void 0,w=void 0,O=h.scrollWidth,C=h.scrollHeight,S=A(h),x=h.scrollLeft,F=h.scrollTop;h===u?(_=y<O&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),w=E<C&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(_=y<O&&("auto"===S.overflowX||"scroll"===S.overflowX),w=E<C&&("auto"===S.overflowY||"scroll"===S.overflowY));var M=_&&(Math.abs(b-o)<=l&&x+y<O)-(Math.abs(g-o)<=l&&!!x),N=w&&(Math.abs(v-a)<=l&&F+E<C)-(Math.abs(m-a)<=l&&!!F);if(!Ze[d])for(var D=0;D<=d;D++)Ze[D]||(Ze[D]={});Ze[d].vx==M&&Ze[d].vy==N&&Ze[d].el===h||(Ze[d].el=h,Ze[d].vx=M,Ze[d].vy=N,clearInterval(Ze[d].pid),0==M&&0==N||(c=!0,Ze[d].pid=setInterval(function(){r&&0===this.layer&&Ve.active._onTouchMove(Ke);var t=Ze[this.layer].vy?Ze[this.layer].vy*s:0,n=Ze[this.layer].vx?Ze[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(Ve.dragged.parentNode[G],n,t,e,Ke,Ze[this.layer].el)||L(Ze[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==u&&(f=P(f,!1)));et=c}}),30),ot=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function at(){}function lt(){}function st(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;rt=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,i=e.activeSortable,o=e.changed,a=e.cancel;if(i.options.swap){var l=this.sortable.el,s=this.options;if(n&&n!==l){var u=rt;!1!==r(n)?(C(n,s.swapClass,!0),rt=n):rt=null,u&&u!==rt&&C(u,s.swapClass,!1)}o(),t(!0),a()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,i=n||this.sortable,o=this.options;rt&&C(rt,o.swapClass,!1),rt&&(o.swap||n&&n.options.swap)&&r!==rt&&(i.captureAnimationState(),i!==t&&t.captureAnimationState(),function(e,t){var n,r,i=e.parentNode,o=t.parentNode;if(!i||!o||i.isEqualNode(t)||o.isEqualNode(e))return;n=D(e),r=D(t),i.isEqualNode(o)&&n<r&&r++;i.insertBefore(t,i.children[n]),o.insertBefore(e,o.children[r])}(r,rt),i.animateAll(),i!==t&&t.animateAll())},nulling:function(){rt=null}},o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:rt}}})}at.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=M(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:ot},o(at,{pluginName:"revertOnSpill"}),lt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ot},o(lt,{pluginName:"removeOnSpill"});var ut,ct,dt,ft,ht,pt=[],mt=[],vt=!1,gt=!1,bt=!1;function yt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag)),g(document,"keydown",this._checkKeyDown),g(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";pt.length&&ct===e?pt.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;dt=t},delayEnded:function(){this.isMultiDrag=~pt.indexOf(dt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<pt.length;r++)mt.push(B(pt[r])),mt[r].sortableIndex=pt[r].sortableIndex,mt[r].draggable=!1,mt[r].style["will-change"]="",C(mt[r],this.options.selectedClass,!1),pt[r]===dt&&C(mt[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||pt.length&&ct===t&&(Et(!0,n),r("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(Et(!1,n),mt.forEach((function(e){A(e,"display","")})),t(),ht=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(mt.forEach((function(e){A(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),ht=!0,r())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&ct&&ct.multiDrag._deselectMultiDrag(),pt.forEach((function(e){e.sortableIndex=D(e)})),pt=pt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),bt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){pt.forEach((function(e){e!==dt&&A(e,"position","absolute")}));var r=T(dt,!1,!0,!0);pt.forEach((function(e){e!==dt&&V(e,r)})),gt=!0,vt=!0}n.animateAll((function(){gt=!1,vt=!1,t.options.animation&&pt.forEach((function(e){q(e)})),t.options.sort&&_t()}))}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;gt&&~pt.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,i=e.dragRect;pt.length>1&&(pt.forEach((function(e){r.addAnimationState({target:e,rect:gt?T(e):i}),q(e),e.fromRect=i,t.removeAnimationState(e)})),gt=!1,function(e,t){pt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,i=e.activeSortable,o=e.parentEl,a=e.putSortable,l=this.options;if(r){if(n&&i._hideClone(),vt=!1,l.animation&&pt.length>1&&(gt||!n&&!i.options.sort&&!a)){var s=T(dt,!1,!0,!0);pt.forEach((function(e){e!==dt&&(V(e,s),o.appendChild(e))})),gt=!0}if(!n)if(gt||_t(),pt.length>1){var u=ht;i._showClone(t),i.options.animation&&!ht&&u&&mt.forEach((function(e){i.addAnimationState({target:e,rect:ft}),e.fromRect=ft,e.thisAnimationDuration=null}))}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(pt.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){ft=o({},t);var i=S(dt,!0);ft.top-=i.f,ft.left-=i.e}},dragOverAnimationComplete:function(){gt&&(gt=!1,_t())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,i=e.sortable,o=e.dispatchSortableEvent,a=e.oldIndex,l=e.putSortable,s=l||this.sortable;if(t){var u=this.options,c=r.children;if(!bt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),C(dt,u.selectedClass,!~pt.indexOf(dt)),~pt.indexOf(dt))pt.splice(pt.indexOf(dt),1),ut=null,Y({sortable:i,rootEl:n,name:"deselect",targetEl:dt,originalEvt:t});else{if(pt.push(dt),Y({sortable:i,rootEl:n,name:"select",targetEl:dt,originalEvt:t}),t.shiftKey&&ut&&i.el.contains(ut)){var d,f,h=D(ut),p=D(dt);if(~h&&~p&&h!==p)for(p>h?(f=h,d=p):(f=p,d=h+1);f<d;f++)~pt.indexOf(c[f])||(C(c[f],u.selectedClass,!0),pt.push(c[f]),Y({sortable:i,rootEl:n,name:"select",targetEl:c[f],originalEvt:t}))}else ut=dt;ct=s}if(bt&&this.isMultiDrag){if((r[G].options.sort||r!==n)&&pt.length>1){var m=T(dt),v=D(dt,":not(."+this.options.selectedClass+")");if(!vt&&u.animation&&(dt.thisAnimationDuration=null),s.captureAnimationState(),!vt&&(u.animation&&(dt.fromRect=m,pt.forEach((function(e){if(e.thisAnimationDuration=null,e!==dt){var t=gt?T(e):m;e.fromRect=t,s.addAnimationState({target:e,rect:t})}}))),_t(),pt.forEach((function(e){c[v]?r.insertBefore(e,c[v]):r.appendChild(e),v++})),a===D(dt))){var g=!1;pt.forEach((function(e){e.sortableIndex===D(e)||(g=!0)})),g&&o("update")}pt.forEach((function(e){q(e)})),s.animateAll()}ct=s}(n===r||l&&"clone"!==l.lastPutMode)&&mt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=bt=!1,mt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),b(document,"pointerup",this._deselectMultiDrag),b(document,"mouseup",this._deselectMultiDrag),b(document,"touchend",this._deselectMultiDrag),b(document,"keydown",this._checkKeyDown),b(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!bt&&ct===this.sortable&&!(e&&_(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;pt.length;){var t=pt[0];C(t,this.options.selectedClass,!1),pt.shift(),Y({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[G];t&&t.options.multiDrag&&!~pt.indexOf(e)&&(ct&&ct!==t&&(ct.multiDrag._deselectMultiDrag(),ct=t),C(e,t.options.selectedClass,!0),pt.push(e))},deselect:function(e){var t=e.parentNode[G],n=pt.indexOf(e);t&&t.options.multiDrag&&~n&&(C(e,t.options.selectedClass,!1),pt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return pt.forEach((function(r){var i;t.push({multiDragElement:r,index:r.sortableIndex}),i=gt&&r!==dt?-1:gt?D(r,":not(."+e.options.selectedClass+")"):D(r),n.push({multiDragElement:r,index:i})})),{items:s(pt),clones:[].concat(mt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Et(e,t){mt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function _t(){pt.forEach((function(e){e!==dt&&e.parentNode&&e.parentNode.removeChild(e)}))}Ve.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):t.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(w),w=void 0},nulling:function(){Ke=Qe=Ye=et=Je=Xe=ze=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(Ke=e,t||d||c||h){it(e,this.options,o,t);var a=P(o,!0);!et||Je&&r===Xe&&i===ze||(Je&&nt(),Je=setInterval((function(){var o=P(document.elementFromPoint(r,i),!0);o!==a&&(a=o,tt()),it(e,n.options,o,t)}),10),Xe=r,ze=i)}else{if(!this.options.bubbleScroll||P(o,!0)===I())return void tt();it(e,this.options,P(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),Ve.mount(lt,at),t.default=Ve}])}));